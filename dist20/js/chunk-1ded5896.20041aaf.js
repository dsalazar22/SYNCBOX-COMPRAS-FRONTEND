(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1ded5896"],{"1a82":function(t,e,s){},3790:function(t,e,s){"use strict";s.d(e,"a",(function(){return c}));var a=s("bc3a"),r=s.n(a),n=s("86c7"),i={headers:{Authorization:null==localStorage.getItem("syncbox.cloud")?"":JSON.parse(localStorage.getItem("syncbox.cloud")).token}},c={orders:function(t,e){return console.log(JSON.parse(localStorage.getItem("syncbox.cloud")).token),console.log(n["n"]),r.a.post(n["n"]+"commercialsorders/"+e,t,i)},addheadorders:function(t,e){return r.a.post(n["n"]+"comercialordercontroller/"+e,t,i)},addorderdetails:function(t,e){return r.a.post(n["n"]+"comercialorderdetailcontroller/"+e,t,i)},gettrm:function(t){return r.a.get(n["n"]+"gettrm/"+t,i)},update_order_status:function(t,e){return r.a.post(n["n"]+"updateorderstatus",t,i)},purchases:function(t,e){return r.a.post(n["n"]+"commercialpurchases/"+e,t,i)},getcartera:function(t,e){return r.a.get(n["n"]+"getoutstandinginvoices/"+e+"/"+t,i)},deliveries:function(t,e){return r.a.post(n["n"]+"deliveries/"+e,t,i)},globalordersreport:function(){return r.a.get(n["n"]+"globalordersreport",i)},quotcontroller:function(t,e){return r.a.post(n["n"]+"quotcontroller/"+e,t,i)},printOrders:function(t){var e="http://localhost:3000/orders",s="POST",a=t;return r.a.request({url:e,method:s,data:a,responseType:"blob"})},sendMail:function(t){return r.a.post("http://localhost:3000/orders",t,i)}}},8239:function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("h4",{staticClass:"font-weight-bold py-3 mb-0"},[t._v(" Tambor de Compras ")]),t._v(" "),s("div",{staticClass:"row"},[s("div",{staticClass:"col"},[s("b-row",[s("b-col",{staticClass:"my-1",attrs:{md:"5"}},[s("b-input-group",[s("b-form-input",{attrs:{placeholder:"Buscar..."},model:{value:t.filter,callback:function(e){t.filter=e},expression:"filter"}}),t._v(" "),s("b-input-group-append",[s("b-btn",{attrs:{disabled:!t.filter},on:{click:function(e){t.filter=""}}},[s("span",{staticClass:"oi oi-delete"})])],1)],1)],1),t._v(" "),s("b-col",{staticClass:"my-1",attrs:{md:"5"}},[s("b-form-select",{attrs:{options:t.pageOptions},model:{value:t.perPage,callback:function(e){t.perPage=e},expression:"perPage"}})],1),t._v(" "),s("b-col",{staticClass:"d-flex justify-content-center my-1",attrs:{md:"2"}},[s("label",{staticClass:"switcher switcher-success mt-2"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.order_active,expression:"order_active"}],staticClass:"switcher-input",attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.order_active)?t._i(t.order_active,null)>-1:t.order_active},on:{click:function(e){return t.ejecutar_cambio()},change:function(e){var s=t.order_active,a=e.target,r=!!a.checked;if(Array.isArray(s)){var n=null,i=t._i(s,n);a.checked?i<0&&(t.order_active=s.concat([n])):i>-1&&(t.order_active=s.slice(0,i).concat(s.slice(i+1)))}else t.order_active=r}}}),t._v(" "),s("span",{staticClass:"switcher-indicator"},[s("span",{staticClass:"switcher-yes"},[s("span",{staticClass:"ion ion-md-checkmark"})]),t._v(" "),s("span",{staticClass:"switcher-no"},[s("span",{staticClass:"ion ion-md-close"})])]),t._v(" "),s("span",{staticClass:"switcher-label"},[t._v(t._s(t.order_active?"Activas":"Cerradas"))])]),t._v(" "),s("b-btn",{directives:[{name:"b-modal",rawName:"v-b-modal.modals-default",modifiers:{"modals-default":!0}}],staticClass:"btn-md",attrs:{variant:"outline-info icon-btn"},on:{click:function(e){return e.preventDefault(),t.openHelp(e)}}},[s("i",{staticClass:"fas fa-chalkboard-teacher"})])],1)],1),t._v(" "),s("div",{staticClass:"table-responsive"},[s("b-table",{attrs:{small:"","tbody-class":"h6 font-weight-normal","show-empty":"",hover:"",responsive:"",stacked:"sm",items:t.cptItems,fields:t.columnsCommercialsOrders,"current-page":t.currentPage,"per-page":t.perPage,filter:t.filter},on:{filtered:t.onFiltered}})],1),t._v(" "),s("div",{staticClass:"d-flex justify-content-between"},[s("div",[s("b-pagination",{staticClass:"my-0",attrs:{"total-rows":t.totalRows,"per-page":t.perPage},model:{value:t.currentPage,callback:function(e){t.currentPage=e},expression:"currentPage"}})],1),t._v(" "),s("div",{staticClass:"w-25"},[s("small",{staticClass:"text-muted"},[t._v(" Total Compras: "+t._s(t.totalRows)+" ")]),t._v(" "),s("div",{staticClass:"small"},[t._v("\n                                Buffer Compras "),s("div",{staticClass:"float-right"},[t._v(" "+t._s(t.cntBlack)+" de "+t._s(t.totalRows)+" ("+t._s(Math.round(t.cntBlack/t.totalRows*100))+"%)")])]),t._v(" "),s("div",{staticClass:"progress mb-1",staticStyle:{height:"4px"}},[s("div",{class:{"progress-bar":!0,"bg-dark":!0},style:{width:String(t.cntBlack/t.totalRows*100)+"%"}})]),t._v(" "),s("div",{staticClass:"small"},[t._v("\n                                Buffer Compras "),s("div",{staticClass:"float-right"},[t._v(" "+t._s(t.cntDanger)+" de "+t._s(t.totalRows)+" ("+t._s(Math.round(t.cntDanger/t.totalRows*100))+"%)")])]),t._v(" "),s("div",{staticClass:"progress mb-1",staticStyle:{height:"4px"}},[s("div",{class:{"progress-bar":!0,"bg-danger":!0},style:{width:String(t.cntDanger/t.totalRows*100)+"%"}})]),t._v(" "),s("div",{staticClass:"small"},[t._v("\n                                Buffer Compras "),s("div",{staticClass:"float-right"},[t._v(" "+t._s(t.cntWarning)+" de "+t._s(t.totalRows)+" ("+t._s(Math.round(t.cntWarning/t.totalRows*100))+"%)")])]),t._v(" "),s("div",{staticClass:"progress mb-1",staticStyle:{height:"4px"}},[s("div",{class:{"progress-bar":!0,"bg-warning":!0},style:{width:String(t.cntWarning/t.totalRows*100)+"%"}})]),t._v(" "),s("div",{staticClass:"small"},[t._v("\n                                Buffer Compras "),s("div",{staticClass:"float-right"},[t._v(" "+t._s(t.cntSuccess)+" de "+t._s(t.totalRows)+" ("+t._s(Math.round(t.cntSuccess/t.totalRows*100))+"%)")])]),t._v(" "),s("div",{staticClass:"progress mb-1",staticStyle:{height:"4px"}},[s("div",{class:{"progress-bar":!0,"bg-success":!0},style:{width:String(t.cntSuccess/t.totalRows*100)+"%"}})]),t._v(" "),s("div",{staticClass:"small"},[t._v("\n                                Buffer Compras "),s("div",{staticClass:"float-right"},[t._v(" "+t._s(t.cntInfo)+" de "+t._s(t.totalRows)+" ("+t._s(Math.round(t.cntInfo/t.totalRows*100))+"%)")])]),t._v(" "),s("div",{staticClass:"progress mb-1",staticStyle:{height:"4px"}},[s("div",{class:{"progress-bar":!0,"bg-info":!0},style:{width:String(t.cntInfo/t.totalRows*100)+"%"}})])])])],1),t._v(" "),s("sweet-modal",{ref:"longModal"},[s("div",{staticClass:"text-left"},[s("vue-markdown",{attrs:{source:t.contentWiki,"anchor-attributes":t.anchorAttrs}})],1)])],1)])},r=[],n=(s("d81d"),s("b0c0"),s("ade3")),i=s("3790"),c=s("9ce6"),o=s.n(c),l=s("b0ae"),d=s("be23"),u={metaInfo:{title:"Tambor de Compras"},components:{VueMarkdown:o.a,SweetModal:l["a"],SweetModalTab:l["b"]},computed:{cptItems:function(){return this.tableCommercialsOrders.map((function(t){var e=t,s="";return s=e.visible_buffer>100?"dark":e.visible_buffer<=100&&e.visible_buffer>66?"danger":e.visible_buffer<=66&&e.visible_buffer>33?"warning":e.visible_buffer<=33&&e.visible_buffer>=0?"success":"info",e._cellVariants={visible_buffer:s},e}))}},data:function(){var t;return t={order_active:!0,name:"purchases",version:"v1.0.0.0",contentWiki:"",cntBlack:0,cntDanger:0,cntWarning:0,cntSuccess:0,cntInfo:0,tableCommercialsOrders:[],columnsCommercialsOrders:[{key:"visible_buffer",label:"Buffer"},{key:"purchases_id",label:"# OC"},{key:"code_status",label:"Estado"},{key:"product_code",label:"Código"},{key:"product_description",label:"Descripción"},{key:"supplier_name",label:"Proveedor"},{key:"requested_amount",label:"Pedida"},{key:"delivered_quantity",label:"Entregada"},{key:"pending_amount",label:"Pendiente"},{key:"order_created",label:"Ingreso"},{key:"deadline",label:"Fecha Comprometida"}],currentPage:1,perPage:50,totalRows:0,pageOptions:[50,100,200],filter:null},Object(n["a"])(t,"contentWiki",""),Object(n["a"])(t,"anchorAttrs",{target:"_blank",rel:"noopener noreferrer nofollow"}),t},methods:{ejecutar_cambio:function(){this.order_active=!this.order_active,this.loadCommercialsOrders()},openHelp:function(){var t=this;Object(d["a"])(this.version,this.name).then((function(e){t.contentWiki=e.data})).catch((function(e){t.contentWiki=e.data})),this.$refs.longModal.open()},loadCommercialsOrders:function(){var t=this;i["a"].purchases([],"select-active-"+this.order_active).then((function(e){t.tableCommercialsOrders=e.data,t.totalRows=e.data.length,t.cntBlack=0,t.cntDanger=0,t.cntWarning=0,t.cntSuccess=0,t.cntInfo=0;for(var s=0;s<t.tableCommercialsOrders.length;s++){var a=t.tableCommercialsOrders[s];a.visible_buffer>100?t.cntBlack=t.cntBlack+1:a.visible_buffer<=100&&a.visible_buffer>66?t.cntDanger=t.cntDanger+1:a.visible_buffer<=66&&a.visible_buffer>33?t.cntWarning=t.cntWarning+1:a.visible_buffer<=33&&a.visible_buffer>=0?t.cntSuccess=t.cntSuccess+1:t.cntInfo=t.cntInfo+1}}))},onFiltered:function(t){this.totalRows=t.length,this.currentPage=1,this.cntBlack=0,this.cntDanger=0,this.cntWarning=0,this.cntSuccess=0,this.cntInfo=0;for(var e=0;e<t.length;e++){var s=t[e];"dark"===s._cellVariants.visible_buffer?this.cntBlack=this.cntBlack+1:"danger"===s._cellVariants.visible_buffer?this.cntDanger=this.cntDanger+1:"warning"===s._cellVariants.visible_buffer?this.cntWarning=this.cntWarning+1:"success"===s._cellVariants.visible_buffer?this.cntSuccess=this.cntSuccess+1:this.cntInfo=this.cntInfo+1}}},created:function(){this.currentPage=1,this.loadCommercialsOrders("true")},beforeCreate:function(){}},f=u,v=(s("8e35"),s("2877")),b=Object(v["a"])(f,a,r,!1,null,null,null);e["default"]=b.exports},"8e35":function(t,e,s){"use strict";var a=s("1a82"),r=s.n(a);r.a}}]);
//# sourceMappingURL=chunk-1ded5896.20041aaf.js.map