(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0cf1b1"],{"61ff":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[e.loading?a("BlockUI",{attrs:{message:"",html:e.html}}):e._e(),e._v(" "),a("notifications",{attrs:{group:"notifications-default"}}),e._v(" "),a("h4",{staticClass:"font-weight-bold py-3 mb-1"},[e._v("Planeador")]),e._v(" "),e.active_reload?e._e():a("div",[e.finished_basic_order?a("form-wizard",{ref:"wzpo",staticClass:"form-wizard-boxed-steps",on:{"on-complete":e.planner_order},scopedSlots:e._u([{key:"step",fn:function(t){return[a("wizard-step",{attrs:{tab:t.tab,transition:t.transition,index:t.index},nativeOn:{click:function(e){return t.navigateToTab(t.index)},keyup:function(a){return!a.type.indexOf("key")&&e._k(a.keyCode,"enter",13,a.key,"Enter")?null:t.navigateToTab(t.index)}}},[a("span",{class:{"text-danger":t.tab.validationError},attrs:{slot:"title"},domProps:{innerHTML:e._s(t.tab.title)},slot:"title"})])]}}],null,!1,224854151)},[e._v(" "),a("tab-content",{attrs:{title:"Orden de Producción ","before-change":e.validateMontaje}},[a("b-card",{staticClass:"mb-3"},[a("h5",[e._v("Orden de Producción")]),e._v(" "),a("b-nav",{staticClass:"justify-content-end mt-2"},[a("b-nav",{staticClass:"nav-sm tabs-alt",attrs:{tabs:""}},[a("b-nav-item",{attrs:{active:!e.orders_planned},on:{click:function(t){e.orders_planned=!1,e.reload_content(!1)}}},[e._v("Pendientes por Planear")]),e._v(" "),a("b-nav-item",{attrs:{active:e.orders_planned},on:{click:function(t){e.orders_planned=!0,e.reload_content(!0)}}},[e._v("Planeadas")])],1)],1),e._v(" "),e.orders_planned?e._e():a("div",[a("b-row",[a("b-col",{staticClass:"my-1",attrs:{md:"6"}},[a("b-input-group",[a("b-form-input",{attrs:{placeholder:"Buscar..."},model:{value:e.filter,callback:function(t){e.filter=t},expression:"filter"}}),e._v(" "),a("b-input-group-append",[a("b-btn",{attrs:{disabled:!e.filter},on:{click:function(t){e.filter=""}}},[a("span",{staticClass:"oi oi-delete"})])],1)],1)],1),e._v(" "),a("b-col",{staticClass:"my-1",attrs:{md:"6"}},[a("b-form-select",{attrs:{options:e.pageOptions},model:{value:e.perPage,callback:function(t){e.perPage=t},expression:"perPage"}})],1)],1),e._v(" "),a("b-table",{attrs:{small:"","show-empty":"",stacked:"md",items:e.cptItems,fields:e.columns,"current-page":e.currentPage,"per-page":e.perPage,filter:e.filter},on:{filtered:e.onFiltered},scopedSlots:e._u([{key:"cell(edit)",fn:function(t){return[a("div",{staticClass:"text-left"},[t.item.partial?e._e():a("b-btn",{staticClass:"btn-xs",attrs:{slot:"next",variant:"outline-success borderless icon-btn"},on:{click:function(a){return a.preventDefault(),e.schedule_order(t.item)}},slot:"next"},[a("i",{staticClass:"ion ion-md-checkmark"})]),e._v(" "),t.item.partial?a("b-btn",{staticClass:"btn-xs",attrs:{slot:"next",variant:"warning icon-btn"},on:{click:function(a){a.preventDefault(),e.partial=t.item.partial,e.schedule_order(t.item)}},slot:"next"},[a("i",{staticClass:"ion ion-md-checkmark"})]):e._e(),e._v("\n                                        "+e._s(t.item.partial?"Parcial":"")+"\n                                    ")],1)]}}],null,!1,4281469163)}),e._v(" "),a("div",{staticClass:"d-flex justify-content-between"},[a("div",[a("b-pagination",{staticClass:"my-0",attrs:{"total-rows":e.totalRows,"per-page":e.perPage},model:{value:e.currentPage,callback:function(t){e.currentPage=t},expression:"currentPage"}})],1),e._v(" "),a("div",{staticClass:"text-muted"},[a("small",[e._v(" Total Ordenes Pendientes: "+e._s(this.totalRows)+" ")])])])],1),e._v(" "),e.orders_planned?a("div",[a("table",{staticClass:"table table-striped mt-2"},[a("thead",{staticClass:"thead-dark"},[a("tr",[a("th",{attrs:{scope:"col"}},[e._v("Buffer")]),e._v(" "),a("th",{attrs:{scope:"col"}},[e._v("OP")]),e._v(" "),a("th",{attrs:{scope:"col"}},[e._v("Pedido")]),e._v(" "),a("th",{attrs:{scope:"col"}},[e._v("Cliente")]),e._v(" "),a("th",{attrs:{scope:"col"}},[e._v("Código")]),e._v(" "),a("th",{attrs:{scope:"col"}},[e._v("Descripción")]),e._v(" "),a("th",{attrs:{scope:"col"}},[e._v("Programado")]),e._v(" "),a("th",{attrs:{scope:"col"}},[e._v("Fecha Programada")]),e._v(" "),e.sandbox_active?a("th",{attrs:{scope:"col"}},[e._v("Nueva Fecha")]):e._e(),e._v(" "),a("th",{attrs:{scope:"col"}},[e._v("Fecha Comprometida")])])]),e._v(" "),a("draggable",{attrs:{tag:"tbody"},model:{value:e.tableData,callback:function(t){e.tableData=t},expression:"tableData"}},e._l(e.tableData,(function(t){return a("tr",{key:t.consecutive_order},[a("td",{attrs:{scope:"row"}},[a("b-btn",{staticClass:"btn-xs",attrs:{variant:"outline-danger borderless icon-btn"},on:{click:function(a){return a.preventDefault(),e.data_change(t,"delete")}}},[a("i",{staticClass:"ion ion-md-close"})]),e._v(" "+e._s(t.consumed_buffer))],1),e._v(" "),a("td",[e._v(e._s(t.consecutive_order))]),e._v(" "),a("td",[e._v(e._s(t.client_order))]),e._v(" "),a("td",[e._v(e._s(t.customer_name))]),e._v(" "),a("td",[e._v(e._s(t.products_code))]),e._v(" "),a("td",[e._v(e._s(t.products_description))]),e._v(" "),a("td",[e._v(e._s(t.programmed_amount))]),e._v(" "),a("td",[e._v(e._s(t.deadline))]),e._v(" "),e.sandbox_active?a("td",[e._v(e._s(t.NuevaFecha))]):e._e(),e._v(" "),a("td",[e._v(e._s(t.requested_date))])])})),0)],1),e._v(" "),a("div",{staticClass:"text-right"},[a("b-btn",{staticClass:"mb-2",attrs:{variant:"default"},on:{click:function(t){return e.cancel_sandbox()}}},[e._v("Cancelar Sandbox")]),e._v(" "),a("b-btn",{staticClass:"mb-2",attrs:{variant:"warning"},on:{click:function(t){return e.sandbox_planning()}}},[e._v("Ejecutar Sandbox")]),e._v(" "),a("b-btn",{staticClass:"mb-2",attrs:{variant:"danger"},on:{click:function(t){return e.sandbox_planning()}}},[e._v("Confirmar Sandbox")])],1)]):e._e()],1)],1),e._v(" "),a("tab-content",{attrs:{title:"Montaje"}},[a("b-card",{staticClass:"mb-3"},[a("h5",[e._v("Montaje")]),e._v(" "),a("div",[a("b-btn",{staticClass:"mb-2",attrs:{block:"",variant:"success"},on:{click:function(t){return e.exec_info()}}},[e._v("Resumen Planning")]),e._v(" "),e._l(e.resumen_planning,(function(t){return a("div",[a("b-card",{staticClass:"mb-3",attrs:{"no-body":""}},[a("b-card-header",[a("div",{staticClass:"row"},[a("div",{staticClass:"col-12"},[a("a",{directives:[{name:"b-toggle",rawName:"v-b-toggle",value:"acc"+t.ProductCode,expression:"'acc'+item.ProductCode"}],staticClass:"d-flex justify-content-between text-dark",attrs:{href:"javascript:void(0)"}},[e._v("\n                                            "+e._s(t.ProductCode)+" - "+e._s(t.ProductDescription)+"\n                                            "),a("div",{staticClass:"collapse-icon"})])])])]),e._v(" "),a("b-collapse",{attrs:{id:"acc"+t.ProductCode,accordion:"acc"+t.ProductCode}},[a("b-card-body",[a("b-tabs",{staticClass:"w-100 nav-tabs-left mb-2"},e._l(t.ResumenActivities,(function(n,r){return a("b-tab",{key:n.ProductionOrderId,attrs:{active:0==r},scopedSlots:e._u([{key:"title",fn:function(){return[n.Confirmed?a("b-btn",{staticClass:"btn-xs",attrs:{variant:"outline-success borderless icon-btn"},on:{click:function(a){return a.preventDefault(),e.change_confirmed(t.ProductCode,n.ProcessName,!n.Confirmed)}}},[a("i",{staticClass:"fas fa-circle"})]):e._e(),e._v(" "),n.Confirmed?e._e():a("b-btn",{staticClass:"btn-xs",attrs:{variant:"outline-danger borderless icon-btn"},on:{click:function(a){return a.preventDefault(),e.change_confirmed(t.ProductCode,n.ProcessName,!n.Confirmed)}}},[a("i",{staticClass:"fas fa-circle"})]),e._v(" \n                                                \n                                                "+e._s(n.ProcessName)+"\n                                            ")]},proxy:!0}],null,!0)},[e._v(" "),a("div",{staticClass:"w-100"},[a("div",{staticClass:"text-right"},[a("label",{staticClass:"switcher switcher-warning mt-4 mb-4"},[a("span",{staticClass:"switcher-label"},[e._v("Paralelizar ésta Actividad en los Centros de Trabajo Activados")]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:n.Parallels,expression:"item_ac.Parallels"}],staticClass:"switcher-input",attrs:{type:"checkbox"},domProps:{checked:Array.isArray(n.Parallels)?e._i(n.Parallels,null)>-1:n.Parallels},on:{click:function(a){return e.change_parallels(t.ProductCode,n.ProcessName,n)},change:function(t){var a=n.Parallels,r=t.target,s=!!r.checked;if(Array.isArray(a)){var i=null,o=e._i(a,i);r.checked?o<0&&e.$set(n,"Parallels",a.concat([i])):o>-1&&e.$set(n,"Parallels",a.slice(0,o).concat(a.slice(o+1)))}else e.$set(n,"Parallels",s)}}}),e._v(" "),a("span",{staticClass:"switcher-indicator"},[a("span",{staticClass:"switcher-yes"},[a("span",{staticClass:"ion ion-md-checkmark"})]),e._v(" "),a("span",{staticClass:"switcher-no"},[a("span",{staticClass:"ion ion-md-close"})])])])]),e._v(" "),a("b-table",{attrs:{small:"","show-empty":"",stacked:"md",items:n.ResumenWorkstations,fields:e.columns_resumen},scopedSlots:e._u([{key:"cell(Code)",fn:function(t){return[a("b-btn",{staticClass:"btn-xs",attrs:{variant:"outline-success borderless icon-btn"},on:{click:function(a){return a.preventDefault(),e.content_load(t.item)}}},[a("i",{staticClass:"ion ion-md-checkmark"})]),e._v(" "),a("span",[e._v(e._s(t.item.Code))])]}},{key:"cell(IsActive)",fn:function(t){return[t.item.Default?a("b-btn",{staticClass:"btn-xs",attrs:{variant:"outline-success borderless icon-btn"},on:{click:function(a){return a.preventDefault(),e.setDefaultWorkstation(t.item,n)}}},[a("i",{staticClass:"fas fa-circle"})]):e._e(),e._v(" "),t.item.Default?e._e():a("b-btn",{staticClass:"btn-xs",attrs:{variant:"outline-danger borderless icon-btn"},on:{click:function(a){return a.preventDefault(),e.setDefaultWorkstation(t.item,n)}}},[a("i",{staticClass:"fas fa-circle"})]),e._v(" "),a("label",{staticClass:"switcher switcher-success mt-2"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.item.IsActive,expression:"row.item.IsActive"}],staticClass:"switcher-input",attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.item.IsActive)?e._i(t.item.IsActive,null)>-1:t.item.IsActive},on:{click:function(a){return e.ejecutar_cambio(t.item.ProductCode,n.ProcessName,t.item)},change:function(a){var n=t.item.IsActive,r=a.target,s=!!r.checked;if(Array.isArray(n)){var i=null,o=e._i(n,i);r.checked?o<0&&e.$set(t.item,"IsActive",n.concat([i])):o>-1&&e.$set(t.item,"IsActive",n.slice(0,o).concat(n.slice(o+1)))}else e.$set(t.item,"IsActive",s)}}}),e._v(" "),a("span",{staticClass:"switcher-indicator"},[a("span",{staticClass:"switcher-yes"},[a("span",{staticClass:"ion ion-md-checkmark"})]),e._v(" "),a("span",{staticClass:"switcher-no"},[a("span",{staticClass:"ion ion-md-close"})])])])]}},{key:"cell(ProductionPerHour)",fn:function(r){return[a("div",{staticClass:"text-left"},[a("b-input-group",{attrs:{size:"sm"}},[a("b-form-input",{attrs:{size:"sm",type:"number"},model:{value:r.item.ProductionPerHour,callback:function(t){e.$set(r.item,"ProductionPerHour",t)},expression:"row.item.ProductionPerHour"}}),e._v(" "),a("b-input-group-append",[a("b-button",{attrs:{size:"sm",variant:"outline-warning borderless icon-btn"},on:{click:function(a){return a.preventDefault(),e.change_productionperhour(t.ProductCode,n.ProcessName,r.item)}}},[a("i",{staticClass:"ion ion-md-create"})])],1)],1)],1)]}}],null,!0)})],1)])})),1)],1)],1)],1)],1)})),e._v(" "),e.resumen_planning.length>0?a("div",{staticClass:"text-right"},[a("b-btn",{staticClass:"mb-2",attrs:{variant:"default"},on:{click:function(t){return e.exec_cancel()}}},[e._v("Cancelar")]),e._v(" "),a("b-btn",{staticClass:"mb-2",attrs:{variant:"warning"},on:{click:function(t){return e.exec_confirm()}}},[e._v("Recalcular")])],1):e._e()],2),e._v(" "),a("div",{attrs:{id:"mountimeline"}})])],1),e._v(" "),a("b-btn",{attrs:{slot:"prev",variant:"default"},slot:"prev"},[e._v("Anterior")]),e._v(" "),a("b-btn",{attrs:{slot:"next",variant:"default"},slot:"next"},[e._v("Siguiente")]),e._v(" "),a("b-btn",{attrs:{slot:"finish",variant:"primary"},slot:"finish"},[e._v("Finalizar")])],1):e._e()],1),e._v(" "),e.active_reload?a("b-btn",{attrs:{block:"",variant:"success"},on:{click:function(t){return e.reloadPage()}}},[e._v("Actualizar")]):e._e(),e._v(" "),a("sweet-modal",{ref:"showFormulario",attrs:{title:"Planear Ordenes de Producción",width:"80%"}}),e._v(" "),a("sweet-modal",{ref:"wsloadchart",attrs:{title:"Carga Centro de Trabajo",width:"90%"}},[a("div",{attrs:{id:"container"}})]),e._v(" "),a("sweet-modal",{ref:"errorWithButtonAlert",attrs:{icon:"error",title:"Borrar registro"}},[e._v("\n        ¿Está seguro que desea retirar esta orden?\n        "),a("div",{staticClass:"w-100 text-center"},[e._v("\n            Al retirar la orden de producción, lo hará con todas las partes y los procesos que dependan de la misma.\n        ")]),e._v(" "),a("template",{slot:"button"},[a("b-btn",{staticClass:"mr-2",attrs:{variant:"danger"},on:{click:function(t){return e.deleteRecord()}}},[e._v("Retirar")])],1),e._v(" "),a("template",{slot:"button"},[a("b-btn",{attrs:{variant:"primary"},on:{click:function(t){return e.closeDeleteRecord()}}},[e._v("Cerrar")])],1)],2),e._v(" "),a("sweet-modal",{ref:"detalle_orden_produccion",attrs:{width:"90%",title:"Detalle Programado"}},[a("div",{staticClass:"w-100 overflow-auto",staticStyle:{height:"1000px"},attrs:{id:"visor_planned_order"}})]),e._v(" "),a("b-modal",{staticClass:"modal-center",attrs:{id:"modals-top",size:"md"},model:{value:e.recovery_order,callback:function(t){e.recovery_order=t},expression:"recovery_order"}},[a("div",{attrs:{slot:"modal-title"},slot:"modal-title"},[e._v("\n        Recuperar "),a("span",{staticClass:"font-weight-light"},[e._v("Orden Planeada")]),a("br")]),e._v(" "),a("fieldset",{staticClass:"demo-vertical-spacing-sm"},[a("div",{staticClass:"text-center"},[e._v("\n                Esta Orden de Producción ha sido Planeada.\n           \n                "),a("div"),e._v(" "),a("h4",[e._v("¿Desea Recuperarla?")])])]),e._v(" "),a("div",{staticClass:"w-100 text-right",attrs:{slot:"modal-footer"},slot:"modal-footer"},[a("b-btn",{attrs:{variant:"danger"},on:{click:function(t){return e.remove_planned_order()}}},[e._v("NO Deseo Recuperarla")]),e._v(" "),a("b-btn",{attrs:{variant:"success"},on:{click:function(t){return e.recovery_planned_order()}}},[e._v("SÍ Deseo Recuperarla")])],1)]),e._v(" "),a("b-modal",{staticClass:"modal-center",attrs:{id:"modals-top",size:"md"},model:{value:e.recovery_order_partial,callback:function(t){e.recovery_order_partial=t},expression:"recovery_order_partial"}},[a("div",{attrs:{slot:"modal-title"},slot:"modal-title"},[e._v("\n        Orden Planeada"),a("br")]),e._v(" "),a("fieldset",{staticClass:"demo-vertical-spacing-sm"},[a("div",{staticClass:"text-center"},[e._v("\n                Esta Orden de Producción ha sido Planeada antes, pero quedo de forma parcial, por este motivo se debe de recuperar la versión previa\n   \n           ")])]),e._v(" "),a("div",{staticClass:"w-100 text-right",attrs:{slot:"modal-footer"},slot:"modal-footer"},[a("b-btn",{attrs:{variant:"info"},on:{click:function(t){e.recovery_order_partial=!1}}},[e._v("Cerrar")])],1)])],1)},r=[],s=(a("99af"),a("d81d"),a("a434"),a("d3b7"),a("acd8"),a("25f0"),a("3ca3"),a("ddb0"),a("96cf"),a("1da1")),i=a("2b0e"),o=a("42b1"),c=a("b0ae"),l=a("2ee4"),d=a("ee98"),u=a.n(d),v=a("310e"),m=a.n(v),_=a("0213");i["default"].use(_["default"]),i["default"].use(u.a);var f={components:{SweetModal:c["a"],SweetModalTab:c["b"],WizardStep:l["WizardStep"],TabContent:l["TabContent"],FormWizard:l["FormWizard"],draggable:m.a},computed:{cptItems:function(){return console.log(this.tableData),this.tableData.map((function(e){var t=e,a="";return a=t.consumed_buffer>100?"dark":t.consumed_buffer<=100&&t.consumed_buffer>66?"danger":t.consumed_buffer<=66&&t.consumed_buffer>33?"warning":t.consumed_buffer<=33&&t.consumed_buffer>=0?"success":"info",t._cellVariants={consumed_buffer:a},t}))}},data:function(){return{loading:!1,html:'\n                <div class="sk-folding-cube sk-primary"><div class="sk-cube1 sk-cube"></div><div class="sk-cube2 sk-cube"></div><div class="sk-cube4 sk-cube"></div><div class="sk-cube3 sk-cube"></div></div>\n                <h5 class="text-center mb-0">LOADING...</h5>',selectedOrder:{},partial:!1,sandbox_active:!1,dragging:!1,recovery_order:!1,orders_planned:!1,recovery_order_partial:!1,item_order:{},selectTab:"plant",active_reload:!1,finished_basic_order:!0,show_tree:!1,resumen_planning:[],primerItem:"<div class='small text-muted'>PRODUCTO</div> ",segundoItem:"<div class='small text-muted'>RECETA</div> ",currentPage:1,perPage:50,totalRows:0,pageOptions:[50,100,200],filter:null,columns:[{key:"consumed_buffer",label:"Buffer"},{key:"consecutive_order",label:"OP"},{key:"client_order",label:"# Pedido"},{key:"customer_name",label:"Cliente"},{key:"products_code",label:"Código"},{key:"products_description",label:"Descripción"},{key:"programmed_amount",label:"Programado"},{key:"programmed_amount",label:"Planeado"},{key:"deadline",label:"Fecha Limite"},{key:"edit",label:"Acciones"}],tableData:[],order_id:"0",columns_resumen:[{key:"IsActive",label:"Activo"},{key:"WorkstationID",label:"ID"},{key:"Code",label:"Codigo"},{key:"StartDate",label:"Fecha Inicio"},{key:"DateFinish",label:"Fecha Fin"},{key:"ProductionPerHour",label:"Produccion x hr"},{key:"TotalMinutes",label:"Minutos"}]}},methods:{setDefaultWorkstation:function(e,t){e.Default||e.IsActive||(e.IsActive=!0),e.Default=!e.Default,e.order_production_process_id=t.OrderProductionProcessId,e.Default?o["a"].addworkstation(e).then((function(e){})):o["a"].remoworkstation(e).then((function(e){}))},content_load_order_planned:function(e){this.$refs.detalle_orden_produccion.open(),document.getElementById("visor_planned_order").innerHTML="",planning.mount(document.getElementById("visor_planned_order"),e),this.recovery_order=!1},content_load:function(e){var t=this;this.objInfo1={workstation_id:e.WorkstationID};var a=[],n=[],r=[];o["a"].calendarcontroller(this.objInfo1,"select-workstation-slots").then((function(s){if(s.data.length>0&&"Invalid Option"!=s.data){t.calendar1=s.data;for(var i=0;i<t.calendar1.length;i++){var o=t.calendar1[i];a.push(o.start_date),r.push(o.programed_hours),n.push(o.planned_hours)}var c={};c.categories=a,c.hoursPlanned=n,c.hoursProgrammers=r,c.title="",t.load_chart(c,"container","Centro de Trabajo "+e.Code+" por Día")}})),o["a"].calendarcontroller(this.objInfo1,"select-workstation-details-slots").then((function(e){e.data.length>0&&"Invalid Option"!=e.data&&e.data})),this.$refs.wsloadchart.open()},cancel_sandbox:function(){var e=this;this.sandbox_active=!1,o["a"].getinforesources("parent-programmed").then((function(t){null!=t.data&&""!=t.data?e.tableData=t.data:e.tableData=[]}))},sandbox_planning:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.loading=!0,t.next=3,o["a"].removesandbox().then((function(e){}));case 3:a=regeneratorRuntime.mark((function t(a){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e.tableData[a].production_order_id,t.next=3,o["a"].sandbox_planning(n).then((function(t){console.log(t),200==t.status&&(e.tableData[a]["NuevaFecha"]=t.data),e.html='\n                        <div class="sk-folding-cube sk-primary"><div class="sk-cube1 sk-cube"></div><div class="sk-cube2 sk-cube"></div><div class="sk-cube4 sk-cube"></div><div class="sk-cube3 sk-cube"></div></div>\n                        <h5 class="text-center mb-0">REPROGRAMANDO ORDEN NRO '.concat(e.tableData[a].consecutive_order,'</h5>\n                        <h5 class="text-center mb-0">TOTAL ').concat(a," / ").concat(e.tableData.length,"</h5>")}));case 3:case"end":return t.stop()}}),t)})),n=0;case 5:if(!(n<e.tableData.length)){t.next=10;break}return t.delegateYield(a(n),"t0",7);case 7:n++,t.next=5;break;case 10:e.sandbox_active=!0,e.loading=!1;case 12:case"end":return t.stop()}}),t)})))()},load_chart:function(e,t,a){Highcharts.chart(t,{chart:{zoomType:"x"},title:{text:"Horas Programadas vs Horas Planeadas"},subtitle:{text:a},xAxis:[{categories:e.categories,crosshair:!0}],yAxis:[{labels:{format:"{value}",style:{color:Highcharts.getOptions().colors[1]}},title:{text:"Horas Planeadas",style:{color:Highcharts.getOptions().colors[1]}}},{title:{style:{color:Highcharts.getOptions().colors[0]}},labels:{format:"{value} mm",style:{color:Highcharts.getOptions().colors[0]}},opposite:!0,visible:!1}],tooltip:{shared:!0},legend:{layout:"vertical",align:"left",x:0,verticalAlign:"top",y:0,floating:!0,backgroundColor:Highcharts.theme&&Highcharts.theme.legendBackgroundColor||"rgba(255,255,255,0.25)"},series:[{name:"Horas Programadas",type:"column",data:e.hoursProgrammers,tooltip:{valueSuffix:" h"}},{name:"Horas Planeadas",type:"line",data:e.hoursPlanned,tooltip:{valueSuffix:" h"}}]})},ejecutar_cambio:function(e,t,a){for(var n=0;n<this.resumen_planning.length;n++){var r=this.resumen_planning[n];if(r.ProductCode==e)for(var s=0;s<r.ResumenActivities.length;s++){var i=r.ResumenActivities[s];if(i.ProcessName==t)for(var o=0;o<i.ResumenWorkstations.length;o++){var c=i.ResumenWorkstations[o];if(c.Code==a.Code)return void(this.resumen_planning[n].ResumenActivities[s].ResumenWorkstations[o].IsActive=a.IsActive)}}}},change_productionperhour:function(e,t,a){for(var n=0;n<this.resumen_planning.length;n++){var r=this.resumen_planning[n];if(r.ProductCode==e)for(var s=0;s<r.ResumenActivities.length;s++){var i=r.ResumenActivities[s];if(i.ProcessName==t)for(var c=0;c<i.ResumenWorkstations.length;c++){var l=i.ResumenWorkstations[c];if(l.Code==a.Code){var d=a.ProductionPerHour.toString();return console.log(this.resumen_planning[n].ResumenActivities[s],this.resumen_planning[n].ResumenActivities[s].ResumenWorkstations[c]),o["a"].setstandard(this.resumen_planning[n].ResumenActivities[s].OrderProductionProcessId,d).then((function(e){console.log(e)})),void(this.resumen_planning[n].ResumenActivities[s].ResumenWorkstations[c].ProductionPerHour=parseFloat(d))}}}}},change_confirmed:function(e,t,a){for(var n=this,r=function(r){var s=n.resumen_planning[r];if(s.ProductCode==e)for(var i=function(e){var i=s.ResumenActivities[e];if(i.ProcessName==t){var c={};c.order_production_process_id=n.resumen_planning[r].ResumenActivities[e].OrderProductionProcessId,c.status=a,o["a"].changestatusactivity(c).then((function(t){n.resumen_planning[r].ResumenActivities[e].Confirmed=a}))}},c=0;c<s.ResumenActivities.length;c++)i(c)},s=0;s<this.resumen_planning.length;s++)r(s)},change_parallels:function(e,t,a){for(var n=0;n<this.resumen_planning.length;n++){var r=this.resumen_planning[n];if(r.ProductCode==e)for(var s=0;s<r.ResumenActivities.length;s++){var i=r.ResumenActivities[s];i.ProcessName==t&&(this.resumen_planning[n].ResumenActivities[s].Parallels=a.Parallels)}}},reload_content:function(e){var t=this;this.tableData=[],e?o["a"].getinforesources("parent-programmed").then((function(e){null!=e.data&&""!=e.data?t.tableData=e.data:t.tableData=[]})):o["a"].getinforesources("parent-to-program").then((function(e){null!=e.data&&""!=e.data?(t.tableData=e.data,t.totalRows=e.data.length):(t.tableData=[],t.totalRows=0)}))},closeDeleteRecord:function(){this.item_order={},this.$refs.errorWithButtonAlert.close()},deleteRecord:function(){var e=this;o["a"].removeorderplanned(this.item_order.production_order_id).then((function(t){e.reload_content(!0),e.$refs.errorWithButtonAlert.close()}))},data_change:function(e,t){this.item_order=e,this.$refs.errorWithButtonAlert.open()},exec_cancel:function(){this.resumen_planning=[]},exec_confirm:function(){var e=this;o["a"].setorderplanned(this.order_id,this.resumen_planning).then((function(t){e.validateMontaje(),e.exec_info()}))},remove_workstation:function(e,t,a){for(var n=0;n<this.resumen_planning.length;n++){var r=this.resumen_planning[n];if(r.ProductCode==e)for(var s=0;s<r.ResumenActivities.length;s++){var i=r.ResumenActivities[s];if(i.ProcessName==t)for(var o=0;o<i.ResumenWorkstations.length;o++){var c=i.ResumenWorkstations[o];if(c.Code==a.Code)return void(0==o?this.resumen_planning[n].ResumenActivities[s].ResumenWorkstations.shift():this.resumen_planning[n].ResumenActivities[s].ResumenWorkstations.splice(o,o))}}}},exec_info:function(){var e=this;o["a"].getorderplanned(this.order_id).then((function(t){null!=t.data&&""!=t.data?e.resumen_planning=t.data:e.resumen_planning=[]}))},showCustom:function(e,t,a){this.$notify({group:"notifications-default",type:e,title:t,text:a})},validateSecuencia:function(){return document.getElementById("viewport3d").innerHTML="",planning.display(document.getElementById("viewport3d"),document.getElementById("selectionInfo"),this.order_id),!0},remove_planned_order:function(){var e=this;o["a"].deleteorderplanned(this.order_id).then((function(t){e.exec_cancel(),e.validateMontaje(),e.recovery_order=!1}))},recovery_planned_order:function(){this.exec_cancel(),this.validateMontaje(),this.recovery_order=!1},validateMontaje:function(){return o["a"].mount(this.order_id).then((function(e){var t=e.data["ResumenPlanning"],a=document.getElementById("mountimeline"),n=new google.visualization.Timeline(a),r=new google.visualization.DataTable;r.addColumn({type:"string",id:"Eventos"}),r.addColumn({type:"string",id:"Evento"}),r.addColumn({type:"date",id:"Start"}),r.addColumn({type:"date",id:"End"});for(var s=[],i=0,o=0;o<t.length;o++){i++;var c=t[o],l=new Date(c.DateStart),d=new Date(c.DateFinish);s.push([c.ProductCode,c.ProductDescription,new Date(l.getFullYear(),l.getMonth(),l.getDate(),l.getHours(),l.getMinutes(),l.getSeconds()),new Date(d.getFullYear(),d.getMonth(),d.getDate(),d.getHours(),d.getMinutes(),d.getSeconds())]);for(var u=0;u<c.ResumenActivities.length;u++){i++;var v=c.ResumenActivities[u];l=new Date(v.DateStart),d=new Date(v.DateFinish),s.push([c.ProductCode+" - "+v.ProcessName,v.ProcessName,new Date(l.getFullYear(),l.getMonth(),l.getDate(),l.getHours(),l.getMinutes(),l.getSeconds()),new Date(d.getFullYear(),d.getMonth(),d.getDate(),d.getHours(),d.getMinutes(),d.getSeconds())])}}var m=40,_=40.12*i,f=_+m;document.getElementById("mountimeline").style.height=f.toString()+"px";var p={timeline:{showBarLabels:!0}};r.addRows(s),n.draw(r,p)})),!0},reloadPage:function(){window.location.reload()},planner_order:function(){o["a"].operationslots(this.order_id).then((function(e){})),this.active_reload=!0},load_info_programmer:function(e){document.getElementById("viewport3d").innerHTML="",planning.display(document.getElementById("viewport3d"),document.getElementById("selectionInfo"),this.order_id)},schedule_order:function(e){this.selectedOrder=e,this.order_id=e.production_order_id},onFiltered:function(e){this.totalRows=e.length,this.currentPage=1}},created:function(){var e=this;google.charts.load("current",{packages:["timeline"]}),o["a"].getinforesources("parent-to-program").then((function(t){null!=t.data&&""!=t.data?(e.tableData=t.data,e.totalRows=t.data.length):(e.tableData=[],e.totalRows=0)}))},beforeMount:function(){}},p=f,b=(a("8e35"),a("0c18"),a("2877")),h=Object(b["a"])(p,n,r,!1,null,null,null);t["default"]=h.exports}}]);
//# sourceMappingURL=chunk-2d0cf1b1.65ca2dec.js.map