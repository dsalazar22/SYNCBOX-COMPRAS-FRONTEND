(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-36ed94dc"],{"0c2f":function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var a=n("bc3a"),r=n.n(a),o=n("acc0"),s={headers:{Authorization:null==localStorage.getItem("syncbox.cloud")?"":JSON.parse(localStorage.getItem("syncbox.cloud")).token}},i={infoOEE:function(t,e){return r.a.get(o["c"]+"infoOEE/"+t+"/"+e,s)},infoContentOEE:function(t,e){return r.a.get(o["c"]+"infogroupOEE/"+t+"/"+e,s)},obteneroeeinfocomplete:function(){return r.a.get(o["c"]+"obteneroeeinfocomplete",s)},getOEEGroup:function(t,e){return r.a.get(o["c"]+"getOEEGroup/"+t+"/"+e,s)},gettables:function(){return r.a.get(o["c"]+"gettables",s)},infoContentWorkstationOEE:function(t){return r.a.get(o["c"]+"getInfoWorkstation/"+t,s)},actionProductionOrder:function(t,e,n){var a={headers:{Authorization:JSON.parse(localStorage.getItem("syncbox.cloud")).token}};return r.a.post(o["c"]+"wscontroller/"+e+"/"+n,t,a)},concurrentOrders:function(t,e){var n={headers:{Authorization:JSON.parse(localStorage.getItem("syncbox.cloud")).token}};return r.a.post(o["c"]+"concurrentorders/"+e,t,n)},apirundb:function(t,e){var n={headers:{Authorization:JSON.parse(localStorage.getItem("syncbox.cloud")).token}};return r.a.get(o["d"]+"rundbbykey/"+t+"/"+e,n)},apihget:function(t,e){var n={headers:{Authorization:JSON.parse(localStorage.getItem("syncbox.cloud")).token}};return r.a.get(o["d"]+"runhget/"+t+"/"+e,n)},apirunset:function(t,e,n){var a={headers:{Authorization:JSON.parse(localStorage.getItem("syncbox.cloud")).token}};return r.a.get(o["d"]+"runset/"+t+"/"+e+"/"+n+"/5",a)},sendredis:function(t,e,n,a){var s={headers:{Authorization:JSON.parse(localStorage.getItem("syncbox.cloud")).token}};return r.a.get(o["d"]+"sendhash/"+t+"/"+e+"/"+n+"/"+a,s)},sendProductionOrder:function(t,e){var n={headers:{Authorization:JSON.parse(localStorage.getItem("syncbox.cloud")).token}};return r.a.post(o["c"]+"wssendevents/"+t,e,n)},getReport:function(t,e,n,a,s){var i={headers:{Authorization:JSON.parse(localStorage.getItem("syncbox.cloud")).token}};return r.a.get(o["c"]+"wsreportinfo/"+e+"/"+t+"/"+n+"/"+a+"/"+s,i)},getStopCode:function(t){return r.a.get(o["c"]+"getInfoOperation/"+t+"/stopcode",s)},getresumen:function(t){return r.a.get(o["c"]+"getresumen/"+t)},callerscontroller:function(t,e){return r.a.post(o["c"]+"callerscontroller/"+t,e,s)},infoColorsOEE:function(t){var e="";return t>0&&t<=75?e="danger":t>75&&t<=85?e="warning":t>85&&t<=95?e="success":t>95&&(e="primary"),e},infoColorsCurrenComplete:function(t){var e="";return t>0&&t<=75?e="success":t>75&&t<=85?e="warning":t>85&&(e="danger"),e},infoColorsCurrenVelocity:function(t){var e="";return t>0&&t<=75?e="danger":t>75&&t<=85?e="warning":t>85&&(e="success"),e},infoColorsVelocity:function(t){var e="";return t>0&&t<=75?e="danger":t>75&&t<=85?e="warning":t>85&&(e="success"),e},infoBackgroudColorsOEE:function(t){var e="";return e=t>0&&t<=65?"#CD0000":t>65&&t<=75?"#FF8C00":t>75&&t<=85?"#FFD700":t>85&&t<=95?"#40a070":t>95?"#00C5CD":"#FFF",e},infoForeColorsOEE:function(t){var e="";return e=t>0&&t<=65||t>65&&t<=75?"#FFF":t>75&&t<=85?"#000":t>85&&t<=95?"#FFF":t>95?"#40a070":"#000",e}}},"62e4":function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},7937:function(t,e,n){"use strict";var a=n("d9cb"),r=n.n(a);r.a},9663:function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));n("99af");var a=n("bc3a"),r=n.n(a),o=n("86c7"),s={headers:{Authorization:null==localStorage.getItem("syncbox.cloud")?"":JSON.parse(localStorage.getItem("syncbox.cloud")).token}},i={get_content_time_series:function(t,e){return r.a.post(o["m"]+"getcontenttimeseries/"+e,t,s)},get_epoch_time_series:function(t){return r.a.get(o["m"]+"getepochtimeseries/"+t,s)},tagcontroller:function(t,e,n){return r.a.post(o["m"]+"tagcontroller/".concat(n,"/").concat(e),t,s)},getlastvalue:function(t){return r.a.post(o["m"]+"getlastvalue/".concat(t),s)},boardcontroller:function(t,e){return r.a.post(o["m"]+"boardcontroller/".concat(e),t,s)},alarmcontroller:function(t,e){return r.a.post(o["m"]+"alarmcontroller/".concat(e),t,s)},ownertagscontroller:function(t,e){return r.a.post(o["m"]+"ownertagscontroller/".concat(e),t,s)},gettimeseries:function(){return o["m"]}}},d9cb:function(t,e,n){},f734:function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("notifications",{attrs:{group:"notifications-default"}}),t._v(" "),n("h4",{staticClass:"font-weight-bold py-3 mb-4"},[t._v("Alarmas Tiempo Real")]),t._v(" "),n("div",{staticClass:"w-100 text-right"}),t._v(" "),n("b-tabs",{staticClass:"nav-tabs-left mb-2"},[t._l(t.tableData,(function(e,a){return n("b-tab",{key:e.board_name,attrs:{active:0==a},scopedSlots:t._u([{key:"title",fn:function(){return[t._v("\n                "+t._s(e.alarm_name)+"\n            ")]},proxy:!0}],null,!0)},[t._v(" "),n("div",{staticClass:"ml-2 mr-2 mt-2"},[n("b-table",{attrs:{small:"","show-empty":"",stacked:"md",items:JSON.parse(e.info_config),fields:t.columnsAlarms},scopedSlots:t._u([{key:"cell(comparison)",fn:function(e){return[n("div",{staticClass:"text-left"},[n("i",{class:t.getColor(e.item)}),t._v("\n                            "+t._s(t.tableRealTimeData[e.item.tags])+"\n                            "+t._s(e.item.comparison)+"\n                            "+t._s(e.item.alarm_value)+"\n                        ")])]}},{key:"cell(edit)",fn:function(e){return[n("div",{staticClass:"text-left"},[n("b-input-group",[n("b-form-input",{attrs:{placeholder:"Valor Enviar",size:"sm",disabled:0==e.item.edit_value},model:{value:t.valuesPrepared[e.item.tags],callback:function(n){t.$set(t.valuesPrepared,e.item.tags,n)},expression:"valuesPrepared[props.item.tags]"}}),t._v(" "),n("b-input-group-append",[n("b-btn",{attrs:{variant:"success",size:"sm"},on:{click:function(n){return t.sendValue(e.item)}}},[n("span",{staticClass:"ion ion-md-checkmark"})])],1)],1)],1)]}}],null,!0)})],1)])})),t._v(" "),t.owner_counter.length>0?n("b-tab",{scopedSlots:t._u([{key:"title",fn:function(){return[t._v("\n                Mis Contadores\n            ")]},proxy:!0}],null,!1,2753660530)},[t._v(" "),n("div",{staticClass:"ml-2 mr-2 mt-2"},[n("b-table",{attrs:{small:"","show-empty":"",stacked:"md",items:t.owner_counter,fields:t.columnsCounter},scopedSlots:t._u([{key:"tag_name",fn:function(e){return[n("div",{staticClass:"text-left"},[t._v("\n                            "+t._s(e.item.tag_name)+"\n                        ")])]}},{key:"current_value",fn:function(e){return[n("div",{staticClass:"text-left"},[t._v("\n                            "+t._s(t.getCurrentValue(e.item))+"\n                        ")])]}},{key:"max_value",fn:function(e){return[n("div",{staticClass:"text-left"},[n("i",{class:t.getColor(e.item)}),t._v("  \n                            "+t._s(t.getLimitValue(e.item))+"\n\n                        ")])]}},{key:"wscode",fn:function(e){return[n("div",{staticClass:"text-left"},["Timers"==e.item.counter_type?n("i",{staticClass:"ion ion-md-stopwatch text-info"}):t._e(),t._v(" "),"Timers"!=e.item.counter_type?n("i",{staticClass:"ion ion-md-calculator text-info"}):t._e(),t._v("\n                             \n                            "+t._s(e.item.wscode)+"\n                        ")])]}},{key:"edit",fn:function(e){return[n("div",{staticClass:"text-left"},[n("b-btn",{attrs:{variant:"success",size:"sm"},on:{click:function(n){return t.sendResetOwnerValue(e.item)}}},[n("span",{staticClass:"ion ion-md-checkmark"})])],1)]}}],null,!1,1023087607)})],1)]):t._e()],2)],1)},r=[],o=(n("a15b"),n("acd8"),n("ac1f"),n("1276"),n("2b0e")),s=n("ee98"),i=n.n(s),c=n("9663");n("0c2f"),n("c1df");o["default"].use(i.a);var l={components:{},data:function(){return{chart:null,ax:null,interval_realtime:!0,interval_chart:null,series_realtime:null,chart_info:[],chart_test:[],tableData:[],tableRealTimeData:[],valuesPrepared:[],owner_counter:[],columnsCounter:[{key:"wscode",label:"Centro Trabajo"},{key:"tag_name",label:"Nombre Variable"},{key:"current_value",label:"Valor Actual"},{key:"max_value",label:"Limite"},{key:"edit",label:"Reset"}],columnsAlarms:[{key:"alarm_name",label:"Nombre Variable"},{key:"tags",label:"TAG"},{key:"comparison",label:"Valor Actual | Limite"},{key:"edit",label:"Reset"}]}},methods:{showCustom:function(t,e,n){this.$notify({group:"notifications-default",type:t,title:e,text:n})},sendResetOwnerValue:function(t){var e=this;infoservices.sendredis(6,t.id_tag,"current_value",0).then((function(t){202===t.status?e.showCustom("bg-danger text-white","Error","¡Error Guardando el Registro!"):e.showCustom("bg-warning text-white","Modificar Registro","¡El Registro se ha Modificado con Éxito!")}))},SecondsTohhmmss:function(t){var e=Math.floor(t/3600),n=Math.floor((t-3600*e)/60),a=t-3600*e-60*n;a=Math.round(100*a)/100;var r=e<10?"0"+e:e;return r+=":"+(n<10?"0"+n:n),r+=":"+(a<10?"0"+a:a),r},getLimitValue:function(t){var e=t.max_value;if("Timers"==t.counter_type){var n=1;"Horas"==t.time_option?n=3600:"Minutos"==t.time_option&&(n=36),e=this.SecondsTohhmmss(e*n)}return e},getCurrentValue:function(t){return"Timers"==t.counter_type?this.SecondsTohhmmss(t.current_value):t.current_value},sendValue:function(t){var e=this,n=t.tags.split(":")[0].split(" ").join("+"),a=t.tags.split(":")[1];infoservices.apirunset(2,"w:"+a+":"+n,this.valuesPrepared[t.tags]).then((function(t){202===t.status?e.showCustom("bg-danger text-white","Error","¡Error Guardando el Registro!"):e.showCustom("bg-warning text-white","Modificar Registro","¡El Registro se ha Modificado con Éxito!")}))},getColor:function(t){var e=t.comparison,n=this.tableRealTimeData[t.tags],a=t.alarm_value;if("Counter"==t.counter_type||"Timers"==t.counter_type){e="<",a=t.max_value,n=t.current_value;var r=1;"Timers"==t.counter_type&&(r=1,"Horas"==t.time_option?r=3600:"Minutos"==t.time_option&&(r=36),a*=r)}return"<"==e?parseFloat(n)<parseFloat(a)?"fas fa-circle text-success":"fas fa-circle text-danger":"<="==e?parseFloat(n)<=parseFloat(a)?"fas fa-circle text-success":"fas fa-circle text-danger":">"==e?parseFloat(n)>parseFloat(a)?"fas fa-circle text-success":"fas fa-circle text-danger":">="==e?parseFloat(n)>=parseFloat(a)?"fas fa-circle text-success":"fas fa-circle text-danger":"=="==e?parseFloat(n)==parseFloat(a)?"fas fa-circle text-success":"fas fa-circle text-danger":void 0},chartWorking:function(){var t=this;this.interval_chart=setInterval((function(){try{c["a"].alarmcontroller("[]","get_tags_value").then((function(e){t.tableRealTimeData=e.data})),c["a"].ownertagscontroller("[]","get").then((function(e){for(var n=e.data,a=Object.keys(e.data),r=[],o=0;o<a.length;o++){var s=a[o],i=n[s];i["id_tag"]=s,r.push(i)}t.owner_counter=r}),(function(e){clearInterval(t.interval_chart)}))}catch(e){console.log(e)}}),1e3)},showData:function(){var t=this;c["a"].alarmcontroller("[]","get").then((function(e){t.tableData=Object.values(e.data),t.totalRows=t.tableData.length,t.valuesPrepared=[];for(var n=0;n<t.tableData.length;n++)for(var a=JSON.parse(t.tableData[n].info_config),r=0;r<a.length;r++){var o=a[r];t.valuesPrepared[o.tags]=o.prop_value}}))},handleVisibilityChange:function(){document.hidden?clearInterval(this.interval_chart):this.chartWorking()}},mounted:function(){this.chartWorking()},created:function(){this.showData(),document.addEventListener("visibilitychange",this.handleVisibilityChange,!1)}},u=l,f=(n("7937"),n("2877")),d=Object(f["a"])(u,a,r,!1,null,null,null);e["default"]=d.exports}}]);
//# sourceMappingURL=chunk-36ed94dc.d8e66004.js.map