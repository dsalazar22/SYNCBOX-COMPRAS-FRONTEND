(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4f90b033"],{"0b4b":function(t,e,a){},"60bc":function(t,e,a){"use strict";var n=a("0b4b"),r=a.n(n);r.a},"73c9":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("h4",{staticClass:"font-weight-bold py-3 mb-4"},[t._v("Tiempo Real - Series de Tiempos")]),t._v(" "),a("div",[a("b-tabs",{staticClass:"nav-tabs-left mb-2"},t._l(t.tableData,(function(e,n){return a("b-tab",{key:e.board_name,attrs:{active:0==n},scopedSlots:t._u([{key:"title",fn:function(){return[t._v("\n\n                    "+t._s(e.board_name)+"\n                    ")]},proxy:!0}],null,!0)},[t._v(" "),a("div",{staticClass:"text-center",staticStyle:{width:"90%"}},t._l(JSON.parse(e.info_config),(function(t,e){return a("div",{staticClass:"text-center"},[a("timeseries",{attrs:{name_chart:t.chart_name,tags:t.tags,backtime:parseInt(t.time_minutes)}})],1)})),0)])})),1)],1)])},r=[],i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{ref:"highcharts",staticStyle:{"min-width":"310px",height:"400px",margin:"0 auto"},attrs:{id:t.name_chart}}),t._v(" "),a("div",{staticClass:"text-right mt-2 mb-2"},[this.interval_realtime?a("b-button",{attrs:{variant:"outline-danger",block:"",size:"sm"},on:{click:function(e){return t.controlRealChar()}}},[a("i",{staticClass:"ion ion-ios-square-outline"}),t._v("    Detener ")]):t._e(),t._v(" "),this.interval_realtime?t._e():a("b-button",{attrs:{variant:"outline-success",block:"",size:"sm"},on:{click:function(e){return t.controlRealChar()}}},[a("i",{staticClass:"ion ion-ios-play"}),t._v("    Iniciar de Nuevo ")])],1),t._v(" "),a("table",{staticClass:"table table-sm"},[t._m(0),t._v(" "),a("tbody",t._l(t.getChartInfo,(function(e,n){return a("tr",[a("td",[a("i",{staticClass:"fas fa-chart-line",style:{color:t.getColor(e)}}),t._v("\n                        "+t._s(e.tag_name)+"\n                    ")]),t._v(" "),a("td",[a("b-badge",{staticClass:"badge-dot",attrs:{variant:"info"}}),t._v("\n                        "+t._s(e.lower_limit)+"\n                    ")],1),t._v(" "),a("td",[a("b-badge",{staticClass:"badge-dot",attrs:{variant:"danger"}}),t._v("\n                        "+t._s(e.upper_limit)+"\n                    ")],1),t._v(" "),a("td",[t._v("\n                        "+t._s(t.meanValue(e))+"\n                    ")]),t._v(" "),a("td",[t._v("\n                        "+t._s(t.sdValue(e))+"\n                    ")]),t._v(" "),a("td",[a("div",{staticClass:"row"},[a("div",{staticClass:"col"}),t._v(" "),a("div",{staticClass:"col text-left"},[e.lower_limit>e.realtime_value?a("i",{staticClass:"fas fa-circle text-info"}):t._e(),t._v(" "),e.upper_limit<e.realtime_value?a("i",{staticClass:"fas fa-circle text-danger"}):t._e(),t._v(" "),e.upper_limit>=e.realtime_value&&e.lower_limit<=e.realtime_value?a("i",{staticClass:"fas fa-circle text-success"}):t._e(),t._v(" "),t._v("\n                                "+t._s(e.realtime_value)+"\n                            ")])])])])})),0)])])},s=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",[a("tr",[a("th",{attrs:{scope:"col"}},[t._v("Nombre")]),t._v(" "),a("th",{attrs:{scope:"col"}},[t._v("Limite Inferior")]),t._v(" "),a("th",{attrs:{scope:"col"}},[t._v("Limite Superior")]),t._v(" "),a("th",{attrs:{scope:"col"}},[t._v("Media")]),t._v(" "),a("th",{attrs:{scope:"col"}},[t._v("Desv stand")]),t._v(" "),a("th",{attrs:{scope:"col"}},[t._v("Valor Actual")])])])}],o=(a("99af"),a("d81d"),a("13d5"),a("b0c0"),a("a9e3"),a("acd8"),a("ac1f"),a("1276"),a("96cf"),a("1da1")),c=a("9663"),l={components:{},props:{name_chart:{type:String},tags:{type:Array},backtime:{type:Number}},computed:{getChartInfo:function(){this.chart_test;return this.chart_info}},data:function(){return{chart:null,ax:null,interval_realtime:!0,interval_chart:null,series_realtime:null,chart_info:[],chart_test:[]}},methods:{standardDeviation:function(t){var e=this.average(t),a=t.map((function(t){var a=t-e,n=a*a;return n})),n=this.average(a),r=Math.sqrt(n);return r},average:function(t){var e=t.reduce((function(t,e){return t+e}),0),a=e/t.length;return a},meanValue:function(t){for(var e=0;e<this.ax.series.length;e++){var a=this.ax.series[e];if(a.name==t.codigocentrotrabajo+" "+t.tag_name)return Math.round(100*this.average(a.yData))/100}},sdValue:function(t){for(var e=0;e<this.ax.series.length;e++){var a=this.ax.series[e];if(a.name==t.codigocentrotrabajo+" "+t.tag_name)return Math.round(100*this.standardDeviation(a.yData))/100}},getColor:function(t){for(var e=0;e<this.ax.series.length;e++){var a=this.ax.series[e];if(a.name==t.codigocentrotrabajo+" "+t.tag_name)return a.color}},controlRealChar:function(){this.interval_realtime=!this.interval_realtime},dynamicChart:function(){return Highcharts.chart(this.name_chart,{chart:{type:"line",animation:Highcharts.svg,marginRight:10,zoomType:"x"},time:{useUTC:!1},title:{text:this.name_chart},accessibility:{announceNewData:{enabled:!0,minAnnounceInterval:15e3,announcementFormatter:function(t,e,a){return!!a&&"New point added. Value: "+a.y}}},xAxis:{type:"datetime",tickPixelInterval:150},yAxis:{title:{text:"Value"},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{headerFormat:"<b>{series.name}</b><br/>",pointFormat:"{point.x:%Y-%m-%d %H:%M:%S}<br/>{point.y:.2f}"},legend:{enabled:!1},exporting:{enabled:!1},series:[]})},chartWorking:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){var a,n,r,i,s,o,l,u;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:a=t.tags,n=0;case 2:if(!(n<a.length)){e.next=15;break}return r=a[n],i=(new Date).getTime(),s=Math.floor((i-60*t.backtime*1e3)/1e3),o=Math.floor(i/1e3),l={},e.next=10,c["a"].get_epoch_time_series("".concat(r,"/").concat(s,"/").concat(o)).then((function(t){l=t.data}));case 10:u={name:r.split(":")[1]+" "+r.split(":")[2],data:l},t.ax.addSeries(u);case 12:n++,e.next=2;break;case 15:null==t.interval_chart&&(t.interval_chart=setInterval((function(){t.interval_realtime&&function(){for(var e=(new Date).getTime(),a=t.tags,n=function(n){var r=a[n];c["a"].getlastvalue(r).then((function(a){var i=parseFloat(a.data["realtime_value"]);t.ax.series[n].addPoint([e,i],!0,!0);var s=!1;t.chart_test=[];for(var o=0;o<t.chart_info.length;o++){var c=t.chart_info[o];if(c.id==r){s=!0;var l=a.data;l.id=r,t.chart_info[o]=l,t.chart_test.push(l)}}if(!s){var u=a.data;u.id=r,t.chart_info.push(a.data)}}))},r=0;r<a.length;r++)n(r)}()}),1e3));case 16:case"end":return e.stop()}}),e)})))()},handleVisibilityChange:function(){if(document.hidden){for(var t=this.ax.series.length,e=t-1;e>-1;e--)this.ax.series[e].remove();clearInterval(this.interval_chart),this.interval_chart=null}else this.chartWorking()}},mounted:function(){this.ax=this.dynamicChart(this.name_chart),this.chartWorking()},created:function(){document.addEventListener("visibilitychange",this.handleVisibilityChange,!1)}},u=l,h=a("2877"),v=Object(h["a"])(u,i,s,!1,null,null,null),_=v.exports,m={components:{timeseries:_},data:function(){return{tableData:[]}},methods:{},created:function(){var t=this;c["a"].boardcontroller("[]","get").then((function(e){for(var a=Object.values(e.data),n=0;n<a.length;n++){var r=a[n];"true"==r.status&&t.tableData.push(r)}}))}},d=m,f=(a("60bc"),Object(h["a"])(d,n,r,!1,null,null,null));e["default"]=f.exports},9663:function(t,e,a){"use strict";a.d(e,"a",(function(){return o}));a("99af");var n=a("bc3a"),r=a.n(n),i=a("86c7"),s={headers:{Authorization:null==localStorage.getItem("syncbox.cloud")?"":JSON.parse(localStorage.getItem("syncbox.cloud")).token}},o={get_content_time_series:function(t,e){return r.a.post(i["m"]+"getcontenttimeseries/"+e,t,s)},get_epoch_time_series:function(t){return r.a.get(i["m"]+"getepochtimeseries/"+t,s)},tagcontroller:function(t,e,a){return r.a.post(i["m"]+"tagcontroller/".concat(a,"/").concat(e),t,s)},getlastvalue:function(t){return r.a.post(i["m"]+"getlastvalue/".concat(t),s)},boardcontroller:function(t,e){return r.a.post(i["m"]+"boardcontroller/".concat(e),t,s)},alarmcontroller:function(t,e){return r.a.post(i["m"]+"alarmcontroller/".concat(e),t,s)},ownertagscontroller:function(t,e){return r.a.post(i["m"]+"ownertagscontroller/".concat(e),t,s)},gettimeseries:function(){return i["m"]}}}}]);
//# sourceMappingURL=chunk-4f90b033.82030e12.js.map