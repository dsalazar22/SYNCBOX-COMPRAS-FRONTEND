(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-59383646"],{"1a82":function(t,a,e){},"6b9d":function(t,a,e){},"8e35":function(t,a,e){"use strict";var s=e("1a82"),o=e.n(s);o.a},"93ec":function(t,a,e){"use strict";var s=e("9bfa"),o=e.n(s);o.a},9663:function(t,a,e){"use strict";e.d(a,"a",(function(){return n}));e("99af");var s=e("bc3a"),o=e.n(s),r=e("86c7"),l={headers:{Authorization:null==localStorage.getItem("syncbox.cloud")?"":JSON.parse(localStorage.getItem("syncbox.cloud")).token}},n={get_content_time_series:function(t,a){return o.a.post(r["m"]+"getcontenttimeseries/"+a,t,l)},get_epoch_time_series:function(t){return o.a.get(r["m"]+"getepochtimeseries/"+t,l)},tagcontroller:function(t,a,e){return o.a.post(r["m"]+"tagcontroller/".concat(e,"/").concat(a),t,l)},getlastvalue:function(t){return o.a.post(r["m"]+"getlastvalue/".concat(t),l)},boardcontroller:function(t,a){return o.a.post(r["m"]+"boardcontroller/".concat(a),t,l)},alarmcontroller:function(t,a){return o.a.post(r["m"]+"alarmcontroller/".concat(a),t,l)},ownertagscontroller:function(t,a){return o.a.post(r["m"]+"ownertagscontroller/".concat(a),t,l)},gettimeseries:function(){return r["m"]}}},"9bfa":function(t,a,e){},b805:function(t,a,e){"use strict";e.r(a);var s=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",[e("notifications",{attrs:{group:"notifications-default"}}),t._v(" "),e("h4",{staticClass:"font-weight-bold py-3 mb-4"},[t._v("Configuración de Alarmas")]),t._v(" "),e("div",{staticClass:"w-100 text-right"}),t._v(" "),e("div",{staticClass:"row"},[e("div",{staticClass:"col"},[e("b-row",[e("b-col",{staticClass:"my-1",attrs:{md:"5"}},[e("b-input-group",[e("b-form-input",{attrs:{placeholder:"Buscar..."},model:{value:t.filter,callback:function(a){t.filter=a},expression:"filter"}}),t._v(" "),e("b-input-group-append",[e("b-btn",{attrs:{disabled:!t.filter},on:{click:function(a){t.filter=""}}},[e("span",{staticClass:"oi oi-delete"})])],1)],1)],1),t._v(" "),e("b-col",{staticClass:"my-1",attrs:{md:"5"}},[e("b-form-select",{attrs:{options:t.pageOptions},model:{value:t.perPage,callback:function(a){t.perPage=a},expression:"perPage"}})],1),t._v(" "),e("b-col",{staticClass:"my-1",attrs:{md:"2"}},[e("b-btn",{attrs:{variant:"outline-success icon-btn"},on:{click:function(a){return a.preventDefault(),t.newBoard()}}},[e("i",{staticClass:"ion ion-md-add"})])],1)],1),t._v(" "),e("b-table",{attrs:{small:"","show-empty":"",stacked:"md",items:t.tableData,fields:t.columns,"current-page":t.currentPage,"per-page":t.perPage,filter:t.filter},on:{filtered:t.onFiltered},scopedSlots:t._u([{key:"cell(alarm_value)",fn:function(a){return[e("div",{staticClass:"text-left"},["true"==a.item.status?e("i",{staticClass:"fas fa-circle text-success"}):t._e(),t._v(" "),"true"!=a.item.status?e("i",{staticClass:"fas fa-circle text-danger"}):t._e(),t._v("\n                        "+t._s(a.item.alarm_name)+"\n                    ")])]}},{key:"cell(codigocentrotrabajo)",fn:function(a){return[e("div",{staticClass:"text-left"},["true"==a.item.status?e("i",{staticClass:"fas fa-circle text-success"}):t._e(),t._v(" "),"false"==a.item.status||void 0==a.item.status?e("i",{staticClass:"fas fa-circle text-danger"}):t._e(),t._v("\n                        "+t._s(a.item.codigocentrotrabajo)+"\n                    ")])]}},{key:"cell(edit)",fn:function(a){return[e("div",{staticClass:"text-left"},[e("b-btn",{staticClass:"btn-xs",attrs:{variant:"outline-success borderless icon-btn"},on:{click:function(e){return e.preventDefault(),t.data_change(a.item,"edit")}}},[e("i",{staticClass:"ion ion-md-create"})]),t._v(" "),e("b-btn",{staticClass:"btn-xs",attrs:{variant:"outline-danger borderless icon-btn"},on:{click:function(e){return e.preventDefault(),t.data_change(a.item,"delete")}}},[e("i",{staticClass:"ion ion-md-close"})])],1)]}}])}),t._v(" "),e("div",{staticClass:"d-flex justify-content-between"},[e("div",[e("b-pagination",{staticClass:"my-0",attrs:{"total-rows":t.totalRows,"per-page":t.perPage},model:{value:t.currentPage,callback:function(a){t.currentPage=a},expression:"currentPage"}})],1),t._v(" "),e("div",{staticClass:"text-muted"},[e("small",[t._v(" Total Configuración de Tags: "+t._s(this.totalRows)+" ")])])])],1)]),t._v(" "),e("b-modal",{staticClass:"modal-center",attrs:{id:"modals-top","no-close-on-backdrop":"",size:"xl"},model:{value:t.showFormulario,callback:function(a){t.showFormulario=a},expression:"showFormulario"}},[e("div",{attrs:{slot:"modal-title"},slot:"modal-title"},[t._v("\n            Administrar Tableros "),e("span",{staticClass:"font-weight-light"},[t._v("Alarmas")]),e("br"),t._v(" "),e("small",{staticClass:"text-danger"},[t._v("No use caracteres especiales en ninguno de los textos, ej. (tildes, ñ, %, @, etc)")])]),t._v(" "),e("fieldset",{staticClass:"demo-vertical-spacing-sm"},[e("b-input-group",{staticClass:"mb-4"},[e("b-form-input",{attrs:{placeholder:"Nombre del Tablero",disabled:t.disabledcode},model:{value:t.objInfo.alarm_name,callback:function(a){t.$set(t.objInfo,"alarm_name",a)},expression:"objInfo.alarm_name"}}),t._v(" "),e("b-input-group-append",[e("b-btn",{attrs:{variant:"success"},on:{click:function(a){return t.saveBoard()}}},[e("span",{staticClass:"ion ion-md-checkmark"})])],1)],1),t._v(" "),e("h4",[t._v("Definición de Variables")]),t._v(" "),e("b-row",[e("b-col",{attrs:{md:"2"}},[e("b-form-group",{attrs:{label:"Orden Visual"}},[e("b-input",{attrs:{type:"number",placeholder:"Orden Visual"},model:{value:t.objAlarms.order,callback:function(a){t.$set(t.objAlarms,"order","string"===typeof a?a.trim():a)},expression:"objAlarms.order"}})],1)],1),t._v(" "),e("b-col",{attrs:{md:"3"}},[e("b-form-group",{attrs:{label:"Nombre de la Alarma"}},[e("b-input",{attrs:{placeholder:"Nombre de la Alarma"},model:{value:t.objAlarms.alarm_name,callback:function(a){t.$set(t.objAlarms,"alarm_name","string"===typeof a?a.trim():a)},expression:"objAlarms.alarm_name"}})],1)],1),t._v(" "),e("b-col",{attrs:{md:"1"}},[e("b-form-group",{attrs:{label:"Comparación"}},[e("b-form-select",{attrs:{options:["<",">","<=",">=","=="]},model:{value:t.objAlarms.comparison,callback:function(a){t.$set(t.objAlarms,"comparison",a)},expression:"objAlarms.comparison"}})],1)],1),t._v(" "),e("b-col",{attrs:{md:"2"}},[e("b-form-group",{attrs:{label:"Valor de Advertencia"}},[e("b-input",{attrs:{placeholder:"Valor de Advertencia"},model:{value:t.objAlarms.alarm_value,callback:function(a){t.$set(t.objAlarms,"alarm_value","string"===typeof a?a.trim():a)},expression:"objAlarms.alarm_value"}})],1)],1),t._v(" "),e("b-col",{attrs:{md:"2"}},[e("b-form-group",{attrs:{label:"Valor Sugerido"}},[e("b-input",{attrs:{type:"number",placeholder:"Valor Sugerido"},model:{value:t.objAlarms.prop_value,callback:function(a){t.$set(t.objAlarms,"prop_value","string"===typeof a?a.trim():a)},expression:"objAlarms.prop_value"}})],1)],1),t._v(" "),e("b-col",{attrs:{md:"2"}},[e("b-form-group",{attrs:{label:"Editar Valor Sugerido"}},[e("label",{staticClass:"switcher switcher-success mt-2"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.objAlarms.edit_value,expression:"objAlarms.edit_value"}],staticClass:"switcher-input",attrs:{type:"checkbox",checked:""},domProps:{checked:Array.isArray(t.objAlarms.edit_value)?t._i(t.objAlarms.edit_value,null)>-1:t.objAlarms.edit_value},on:{change:function(a){var e=t.objAlarms.edit_value,s=a.target,o=!!s.checked;if(Array.isArray(e)){var r=null,l=t._i(e,r);s.checked?l<0&&t.$set(t.objAlarms,"edit_value",e.concat([r])):l>-1&&t.$set(t.objAlarms,"edit_value",e.slice(0,l).concat(e.slice(l+1)))}else t.$set(t.objAlarms,"edit_value",o)}}}),t._v(" "),e("span",{staticClass:"switcher-indicator"},[e("span",{staticClass:"switcher-yes"},[e("span",{staticClass:"ion ion-md-checkmark"})]),t._v(" "),e("span",{staticClass:"switcher-no"},[e("span",{staticClass:"ion ion-md-close"})])])])])],1)],1),t._v(" "),e("b-row",[e("b-col",{attrs:{md:"12"}},[e("b-form-group",{attrs:{label:"TAGS"}},[e("multiselect",{attrs:{placeholder:"",options:t.tableVariables,multiple:!1,searchable:!0,"clear-on-select":!0,"close-on-select":!0,"hide-selected":!0},model:{value:t.objAlarms.tags,callback:function(a){t.$set(t.objAlarms,"tags",a)},expression:"objAlarms.tags"}},[e("span",{attrs:{slot:"noResult"},slot:"noResult"},[t._v("No found.")])])],1)],1)],1),t._v(" "),e("div",{staticClass:"text-right mb-2"},[e("b-btn",{attrs:{variant:"outline-success",size:"sm",disabled:!t.boardCreated},on:{click:function(a){return a.preventDefault(),t.newChart()}}},[e("i",{staticClass:"ion ion-md-checkmark"},[t._v("    Confirmar ")])])],1),t._v(" "),e("b-table",{attrs:{small:"","show-empty":"",stacked:"md",items:t.tableChart,fields:t.columnsCharts},scopedSlots:t._u([{key:"cell(alarm_value)",fn:function(a){return[e("div",{staticClass:"text-left"},[t._v("\n                      X "),e("b",[t._v(" "+t._s(null==a.item.comparison?"???":a.item.comparison)+" ")]),t._v(" "+t._s(a.item.alarm_value)+"\n                    ")])]}},{key:"cell(edit)",fn:function(a){return[e("div",{staticClass:"text-left"},[e("b-btn",{staticClass:"btn-xs",attrs:{variant:"outline-success borderless icon-btn"},on:{click:function(e){return e.preventDefault(),t.data_change_chart(a.item,"edit")}}},[e("i",{staticClass:"ion ion-md-create"})]),t._v(" "),e("b-btn",{staticClass:"btn-xs",attrs:{variant:"outline-danger borderless icon-btn"},on:{click:function(e){return e.preventDefault(),t.data_change_chart(a.item,"delete")}}},[e("i",{staticClass:"ion ion-md-close"})])],1)]}}])})],1),t._v(" "),e("div",{staticClass:"w-100 text-right",attrs:{slot:"modal-footer"},slot:"modal-footer"},[e("div",{staticClass:"d-flex justify-content-between"},[e("div",[e("b-form-checkbox",{attrs:{value:"true","unchecked-value":"false",disabled:!t.boardCreated},model:{value:t.objInfo.status,callback:function(a){t.$set(t.objInfo,"status",a)},expression:"objInfo.status"}},[t._v("\n                       Habilitar Tablero\n                    ")])],1),t._v(" "),e("div",[e("b-btn",{attrs:{variant:"primary"},on:{click:function(a){t.showFormulario=!1}}},[t._v("Cancelar / Cerrar")]),t._v(" "),e("b-btn",{attrs:{variant:"success"},on:{click:function(a){return t.save()}}},[t._v("Guardar")])],1)])])]),t._v(" "),e("div",{staticClass:"d-inline-block"},[e("sweet-modal",{ref:"messageSyncInfo",attrs:{icon:"error",title:"Borrar Tablero"}},[e("div",{staticClass:"w-100 text-center"},[t._v("\n                Esta seguro que desea elimintar éste tablero "),e("b",[t._v(t._s(this.objInfo.alarm_name))]),t._v(" ?\n                "),e("p",[t._v("\n                    Esta acción no se podrá deshacer.    \n                ")])]),t._v(" "),e("template",{slot:"button"},[e("b-btn",{staticClass:"mr-2",attrs:{variant:"danger"},on:{click:function(a){return t.deleteBoard()}}},[t._v("Borrar Tablero")])],1),t._v(" "),e("template",{slot:"button"},[e("b-btn",{attrs:{variant:"primary"},on:{click:function(a){return t.cancelDeleteBoard()}}},[t._v("Cerrar")])],1)],2)],1)],1)},o=[],r=(e("4e82"),e("a434"),e("b0c0"),e("2b0e")),l=e("b0ae"),n=e("ee98"),i=e.n(n),c=e("8e5f"),u=e.n(c),d=e("9663");r["default"].use(i.a);var m={metaInfo:{title:"Configuración de Tableros"},components:{SweetModal:l["a"],Multiselect:u.a,SweetModalTab:l["b"]},data:function(){return{name:"configs_tag",version:"v1.0.0.0",itemVariable:null,tableVariables:[],boardCreated:!1,contentWiki:"",anchorAttrs:{target:"_blank",rel:"noopener noreferrer nofollow"},options:[{text:"Segundos",value:"s"},{text:"Minutos",value:"m"},{text:"Horas",value:"h"}],currentPage:1,perPage:50,totalRows:0,pageOptions:[50,100,200],filter:null,showFormulario:!1,variantSaveButton:"success",disabledcode:!1,modified:!1,tableData:[],columns:[{key:"alarm_name",label:"Nombre del Tablero"},{key:"edit",label:"Edit"}],objAlarms:[],columnsCharts:[{key:"order",label:"Orden"},{key:"alarm_name",label:"Nombre de la Alarma"},{key:"tags",label:"TAG"},{key:"alarm_value",label:"Valor de Advertencia"},{key:"prop_value",label:"Valor Sugerido"},{key:"edit",label:"Edit"}],tableChart:[],objInfo:{decimal_places:0}}},methods:{check_access:function(t,a){return!0},restartInfo:function(){this.objInfo={}},openHelp:function(){var t=this;ApiWikiHelp(this.version,this.name).then((function(a){t.contentWiki=a.data})).catch((function(a){t.contentWiki=a.data})),this.$refs.longModal.open()},onFiltered:function(t){this.totalRows=t.length,this.currentPage=1},showCustom:function(t,a,e){this.$notify({group:"notifications-default",type:t,title:a,text:e})},newChart:function(){var t=-1;void 0!=this.objAlarms.order&&null!=this.objAlarms.order||(this.objAlarms.order=0);for(var a=0;a<this.tableChart.length;a++){var e=this.tableChart[a];this.objAlarms.old_alarm_name!=e.alarm_name&&this.objAlarms.alarm_name!=e.alarm_name||(t=a,this.tableChart[a].alarm_name=this.objAlarms.alarm_name,this.tableChart[a].tags=this.objAlarms.tags,this.tableChart[a].alarm_value=this.objAlarms.alarm_value,this.tableChart[a].prop_value=this.objAlarms.prop_value,this.tableChart[a].edit_value=this.objAlarms.edit_value)}-1==t&&this.tableChart.push({alarm_name:this.objAlarms.alarm_name,tags:this.objAlarms.tags,order:this.objAlarms.order,alarm_value:this.objAlarms.alarm_value,prop_value:this.objAlarms.prop_value,edit_value:this.objAlarms.edit_value}),this.tableChart.sort((function(t,a){return t.order>a.order?1:t.order<a.order?-1:0})),this.objAlarms={}},newBoard:function(){this.objInfo={},this.disabledcode=!1,this.boardCreated=!1,this.showFormulario=!0,this.tableChart=[],this.objAlarms={}},cancelDeleteBoard:function(){this.$refs.messageSyncInfo.close(),this.objInfo={},this.disabledcode=!1,this.boardCreated=!1},deleteBoard:function(t){var a=this;d["a"].alarmcontroller(this.objInfo,"del").then((function(t){a.showCustom("bg-warning text-white","Modificar Registro","¡El Registro se ha Modificado con Éxito!"),a.showData()})),this.$refs.messageSyncInfo.close()},saveBoard:function(){var t=this;d["a"].alarmcontroller(this.objInfo,"modify").then((function(a){202===a.status?t.showCustom("bg-danger text-white","Error","¡Error Guardando el Registro!"):(t.showCustom("bg-warning text-white","Modificar Registro","¡El Registro se ha Modificado con Éxito!"),""!=a.data&&(t.objInfo=a.data,t.disabledcode=!0,t.boardCreated=!0),t.showData())})).catch((function(t){console.log(t.status)}))},save:function(){var t=this;this.objInfo.info_config=JSON.stringify(this.tableChart),d["a"].alarmcontroller(this.objInfo,"modify").then((function(a){202===a.status?t.showCustom("bg-danger text-white","Error","¡Error Guardando el Registro!"):(t.showCustom("bg-warning text-white","Modificar Registro","¡El Registro se ha Modificado con Éxito!"),""!=a.data&&(t.objInfo=a.data,t.disabledcode=!0,t.boardCreated=!0),t.showData(),t.objAlarms={})})).catch((function(t){console.log(t.status)}))},showData:function(){var t=this;d["a"].alarmcontroller("[]","get").then((function(a){t.tableData=Object.values(a.data),t.totalRows=t.tableData.length}))},data_change:function(t,a){this.variantSaveButton="warning",this.disabledcode=!0,this.boardCreated=!0,this.objInfo=t,this.tableChart=[],""!=t.info_config&&(this.tableChart=JSON.parse(t.info_config)),this.objAlarms={},"edit"===a?this.showFormulario=!0:this.$refs.messageSyncInfo.open()},data_change_chart:function(t,a){if("delete"==a){for(var e=-1,s=0;s<this.objAlarms.length;s++){var o=this.objAlarms[s];(this.objAlarms.old_alarm_name=o.alarm_name)&&(e=s)}this.tableChart.splice(e,1)}else this.objAlarms=t,this.objAlarms.old_alarm_name=t.alarm_name}},created:function(){var t=this;this.showData(),d["a"].alarmcontroller("[]","get_tags").then((function(a){t.tableVariables=a.data}))},mounted:function(){}},b=m,f=(e("8e35"),e("d717"),e("93ec"),e("2877")),h=Object(f["a"])(b,s,o,!1,null,null,null);a["default"]=h.exports},d717:function(t,a,e){"use strict";var s=e("6b9d"),o=e.n(s);o.a}}]);
//# sourceMappingURL=chunk-59383646.0c502e17.js.map