(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5955cac0"],{"32ee":function(t,e,r){"use strict";r.r(e);var o=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("h4",{staticClass:"font-weight-bold py-3 mb-4"},[t._v("\n      Estado de los Pedidos\n      ")]),t._v(" "),r("h1",{staticClass:"display-3 text-center"},[t._v("\n        "+t._s(t.numberWithCommas(t.valorTotal))+"\n        "),r("hr"),t._v(" "),r("p",{staticStyle:{"font-size":"1.6rem"}},[t._v("\n                Pendiente por Facturar\n        ")])]),t._v(" "),r("b-card",{class:"shadow mb-1 border border-secondary bg-white",attrs:{"no-body":""}},[r("h1",{staticClass:"display-4 text-center text-dark mt-2"},[t._v("\n            Facturacion Por Consumo de Buffer\n        "),r("hr")]),t._v(" "),r("div",{staticClass:"mt-4 ml-4 mr-4"},[r("b-row",[r("b-col",{attrs:{md:"4"}},[r("b-row",[r("b-col",{attrs:{xs:"12"}},[r("b-card",{class:"shadow mb-1 border border-dark bg-dark text-white text-center",attrs:{"no-body":""}},[r("h1",{staticClass:"display-4 mt-3"},[t._v("\n                                "+t._s(t.numberWithCommas(t.getinfopercolor(t.commercial_data,"dark").totalprice))+"\n                            ")])])],1),t._v(" "),r("b-col",{attrs:{xs:"12"}},[r("b-card",{class:"shadow mb-1 border border-danger bg-danger text-white text-center",attrs:{"no-body":""}},[r("h1",{staticClass:"display-4 mt-3"},[t._v("\n                                "+t._s(t.numberWithCommas(t.getinfopercolor(t.commercial_data,"danger").totalprice))+"\n                            ")])])],1),t._v(" "),r("b-col",{attrs:{xs:"12"}},[r("b-card",{class:"shadow mb-1 border border-warning bg-warning text-center",attrs:{"no-body":""}},[r("h1",{staticClass:"display-4 mt-3"},[t._v("\n                                "+t._s(t.numberWithCommas(t.getinfopercolor(t.commercial_data,"warning").totalprice))+"\n                            ")])])],1),t._v(" "),r("b-col",{attrs:{xs:"12"}},[r("b-card",{class:"shadow mb-1 border border-success bg-success text-center",attrs:{"no-body":""}},[r("h1",{staticClass:"display-4 mt-3"},[t._v("\n                                "+t._s(t.numberWithCommas(t.getinfopercolor(t.commercial_data,"success").totalprice))+"\n                            ")])])],1),t._v(" "),r("b-col",{attrs:{xs:"12"}},[r("b-card",{class:"shadow mb-1 border border-info bg-info text-center",attrs:{"no-body":""}},[r("h1",{staticClass:"display-4 mt-3"},[t._v("\n                                "+t._s(t.numberWithCommas(t.getinfopercolor(t.commercial_data,"info").totalprice))+"\n                            ")])])],1)],1)],1),t._v(" "),r("b-col",{attrs:{xs:"12",md:"7"}},[r("div",{attrs:{id:"contenedor"}})]),t._v(" "),r("b-col",{attrs:{md:"1"}})],1),t._v(" "),r("b-row",{staticClass:"mt-4"},[r("b-col",{attrs:{xs:"12",md:"12"}},[r("b-row",t._l(t.cptItems,(function(e){return r("b-col",{staticClass:"mb-2",attrs:{xs:"12",md:"4"}},[r("b-btn",{attrs:{block:"",variant:t.eventColorSelected},on:{click:function(r){return t.detalle_cliente(e)}}},[t._v("\n                    "+t._s(e.customer_name)+" "),r("br"),t._v(" "+t._s(t.numberWithCommas(e.totalprice))+"\n                ")])],1)})),1)],1)],1),t._v(" "),null!=t.arrayOrders[0]?r("b-table",{staticStyle:{"font-size":"12px"},attrs:{"sticky-header":!1,"no-border-collapse":!1,responsive:"",items:t.arrayOrders,fields:t.columnsCommercialsOrders},scopedSlots:t._u([{key:"head(order_created)",fn:function(e){return[r("div",{staticClass:"text-nowrap"},[t._v("Fecha Ingreso")])]}},{key:"head(deadline)",fn:function(e){return[r("div",{staticClass:"text-nowrap"},[t._v("Fecha Compromiso")])]}},{key:"cell(product_description)",fn:function(e){return[r("div",{staticClass:"text-nowrap"},[t._v(" "+t._s(e.item.product_description))])]}},{key:"cell(customer_name)",fn:function(e){return[r("div",{staticClass:"text-nowrap"},[t._v(" "+t._s(e.item.customer_name))])]}},{key:"cell(order_code)",fn:function(e){return[r("div",{staticClass:"text-nowrap"},[t._v(" "+t._s(""==e.item.order_code?e.item.orders_id:e.item.order_code))])]}},{key:"cell(total_sale)",fn:function(e){return[r("div",{staticClass:"text-nowrap"},[t._v(" "+t._s(t.numberWithCommas(e.item.sale_price*e.item.requested_amount)))])]}},{key:"cell(sale_price)",fn:function(e){return[r("div",{staticClass:"text-nowrap"},[t._v(" "+t._s(t.numberWithCommas(e.item.sale_price)))])]}},{key:"cell(requested_amount)",fn:function(e){return[r("div",{staticClass:"text-nowrap"},[t._v(" "+t._s(t.numberWithCommas(e.item.requested_amount)))])]}},{key:"cell(delivered_quantity)",fn:function(e){return[r("div",{staticClass:"text-nowrap"},[t._v(" "+t._s(t.numberWithCommas(e.item.delivered_quantity)))])]}},{key:"cell(available_inventory)",fn:function(e){return[r("div",{staticClass:"text-nowrap"},[t._v(" "+t._s(t.numberWithCommas(e.item.available_inventory)))])]}},{key:"cell(total_pending)",fn:function(e){return[r("div",{staticClass:"text-nowrap"},[t._v(" "+t._s(t.numberWithCommas(e.item.total_pending)))])]}},{key:"cell(product_code)",fn:function(e){return[r("div",{staticClass:"text-nowrap"},[t._v(" "+t._s(void 0!=e.item.customer_code&&""!=e.item.customer_code&&e.item.customer_code!=e.item.product_code?e.item.customer_code+" ("+e.item.product_code+")":e.item.product_code))])]}},{key:"cell(edit)",fn:function(e){return[t.check_access("drump_commercial","w")?r("b-dropdown",{attrs:{variant:"default btn-xs icon-btn md-btn-flat hide-arrow",right:!t.isRTL}},[r("template",{slot:"button-content"},[r("i",{staticClass:"ion ion-ios-settings"})]),t._v(" "),r("b-dropdown-item",{on:{click:function(r){t.open_order_to_edit(e.item),t.showEditContentOrder=!0}}},[t._v("   Cambio de Fecha y Estado")]),t._v(" "),r("b-dropdown-item",{attrs:{href:"/comm/newrq/"+(e.item.is_national?"local":"international")+"/"+e.item.orders_id}},[t._v("   Editar Pedido")]),t._v(" "),r("b-dropdown-item",{on:{click:function(r){t.open_deliveries(e.item),t.showEntregas=!0}}},[t._v("   Adicionar Entrega")])],2):t._e()]}}],null,!1,129560396)}):t._e()],1)]),t._v(" "),r("b-card",{class:"shadow mb-1 border border-secondary bg-white text-white",attrs:{"no-body":""}},[r("h1",{staticClass:"display-4 text-center text-dark mt-2"},[t._v("\n                Facturacion Por Mes\n            "),r("hr")]),t._v(" "),r("div",{staticClass:"mt-4 ml-4 mr-4"},[r("div",{attrs:{id:"contenedorMonth"}})]),t._v(" "),null!=t.arrayOrdersMonth[0]?r("b-table",{staticStyle:{"font-size":"12px"},attrs:{"sticky-header":!1,"no-border-collapse":!1,responsive:"",items:t.arrayOrdersMonth,fields:t.columnsCommercialsOrders},scopedSlots:t._u([{key:"head(order_created)",fn:function(e){return[r("div",{staticClass:"text-nowrap"},[t._v("Fecha Ingreso")])]}},{key:"head(deadline)",fn:function(e){return[r("div",{staticClass:"text-nowrap"},[t._v("Fecha Compromiso")])]}},{key:"cell(product_description)",fn:function(e){return[r("div",{staticClass:"text-nowrap"},[t._v(" "+t._s(e.item.product_description))])]}},{key:"cell(customer_name)",fn:function(e){return[r("div",{staticClass:"text-nowrap"},[t._v(" "+t._s(e.item.customer_name))])]}},{key:"cell(order_code)",fn:function(e){return[r("div",{staticClass:"text-nowrap"},[t._v(" "+t._s(""==e.item.order_code?e.item.orders_id:e.item.order_code))])]}},{key:"cell(total_sale)",fn:function(e){return[r("div",{staticClass:"text-nowrap"},[t._v(" "+t._s(t.numberWithCommas(e.item.sale_price*e.item.requested_amount)))])]}},{key:"cell(sale_price)",fn:function(e){return[r("div",{staticClass:"text-nowrap"},[t._v(" "+t._s(t.numberWithCommas(e.item.sale_price)))])]}},{key:"cell(requested_amount)",fn:function(e){return[r("div",{staticClass:"text-nowrap"},[t._v(" "+t._s(t.numberWithCommas(e.item.requested_amount)))])]}},{key:"cell(delivered_quantity)",fn:function(e){return[r("div",{staticClass:"text-nowrap"},[t._v(" "+t._s(t.numberWithCommas(e.item.delivered_quantity)))])]}},{key:"cell(available_inventory)",fn:function(e){return[r("div",{staticClass:"text-nowrap"},[t._v(" "+t._s(t.numberWithCommas(e.item.available_inventory)))])]}},{key:"cell(total_pending)",fn:function(e){return[r("div",{staticClass:"text-nowrap"},[t._v(" "+t._s(t.numberWithCommas(e.item.total_pending)))])]}},{key:"cell(product_code)",fn:function(e){return[r("div",{staticClass:"text-nowrap"},[t._v(" "+t._s(void 0!=e.item.customer_code&&""!=e.item.customer_code&&e.item.customer_code!=e.item.product_code?e.item.customer_code+" ("+e.item.product_code+")":e.item.product_code))])]}},{key:"cell(edit)",fn:function(e){return[t.check_access("drump_commercial","w")?r("b-dropdown",{attrs:{variant:"default btn-xs icon-btn md-btn-flat hide-arrow",right:!t.isRTL}},[r("template",{slot:"button-content"},[r("i",{staticClass:"ion ion-ios-settings"})]),t._v(" "),r("b-dropdown-item",{on:{click:function(r){t.open_order_to_edit(e.item),t.showEditContentOrder=!0}}},[t._v("   Cambio de Fecha y Estado")]),t._v(" "),r("b-dropdown-item",{attrs:{href:"/comm/newrq/"+(e.item.is_national?"local":"international")+"/"+e.item.orders_id}},[t._v("   Editar Pedido")]),t._v(" "),r("b-dropdown-item",{on:{click:function(r){t.open_deliveries(e.item),t.showEntregas=!0}}},[t._v("   Adicionar Entrega")])],2):t._e()]}}],null,!1,129560396)}):t._e()],1),t._v(" "),r("b-card",{class:"shadow mb-1 border border-secondary bg-white text-white",attrs:{"no-body":""}},[r("h1",{staticClass:"display-4 text-center text-dark mt-2"},[t._v("\n                Facturacion Por Semana\n            "),r("hr")]),t._v(" "),r("div",{staticClass:"mt-4 ml-4 mr-4"},[r("div",{attrs:{id:"contenedorMonthWW"}})]),t._v(" "),null!=t.arrayOrdersMonthWW[0]?r("b-table",{staticStyle:{"font-size":"12px"},attrs:{"sticky-header":!1,"no-border-collapse":!1,responsive:"",items:t.arrayOrdersMonthWW,fields:t.columnsCommercialsOrders},scopedSlots:t._u([{key:"head(order_created)",fn:function(e){return[r("div",{staticClass:"text-nowrap"},[t._v("Fecha Ingreso")])]}},{key:"head(deadline)",fn:function(e){return[r("div",{staticClass:"text-nowrap"},[t._v("Fecha Compromiso")])]}},{key:"cell(product_description)",fn:function(e){return[r("div",{staticClass:"text-nowrap"},[t._v(" "+t._s(e.item.product_description))])]}},{key:"cell(customer_name)",fn:function(e){return[r("div",{staticClass:"text-nowrap"},[t._v(" "+t._s(e.item.customer_name))])]}},{key:"cell(order_code)",fn:function(e){return[r("div",{staticClass:"text-nowrap"},[t._v(" "+t._s(""==e.item.order_code?e.item.orders_id:e.item.order_code))])]}},{key:"cell(total_sale)",fn:function(e){return[r("div",{staticClass:"text-nowrap"},[t._v(" "+t._s(t.numberWithCommas(e.item.sale_price*e.item.requested_amount)))])]}},{key:"cell(sale_price)",fn:function(e){return[r("div",{staticClass:"text-nowrap"},[t._v(" "+t._s(t.numberWithCommas(e.item.sale_price)))])]}},{key:"cell(requested_amount)",fn:function(e){return[r("div",{staticClass:"text-nowrap"},[t._v(" "+t._s(t.numberWithCommas(e.item.requested_amount)))])]}},{key:"cell(delivered_quantity)",fn:function(e){return[r("div",{staticClass:"text-nowrap"},[t._v(" "+t._s(t.numberWithCommas(e.item.delivered_quantity)))])]}},{key:"cell(available_inventory)",fn:function(e){return[r("div",{staticClass:"text-nowrap"},[t._v(" "+t._s(t.numberWithCommas(e.item.available_inventory)))])]}},{key:"cell(total_pending)",fn:function(e){return[r("div",{staticClass:"text-nowrap"},[t._v(" "+t._s(t.numberWithCommas(e.item.total_pending)))])]}},{key:"cell(product_code)",fn:function(e){return[r("div",{staticClass:"text-nowrap"},[t._v(" "+t._s(void 0!=e.item.customer_code&&""!=e.item.customer_code&&e.item.customer_code!=e.item.product_code?e.item.customer_code+" ("+e.item.product_code+")":e.item.product_code))])]}},{key:"cell(edit)",fn:function(e){return[t.check_access("drump_commercial","w")?r("b-dropdown",{attrs:{variant:"default btn-xs icon-btn md-btn-flat hide-arrow",right:!t.isRTL}},[r("template",{slot:"button-content"},[r("i",{staticClass:"ion ion-ios-settings"})]),t._v(" "),r("b-dropdown-item",{on:{click:function(r){t.open_order_to_edit(e.item),t.showEditContentOrder=!0}}},[t._v("   Cambio de Fecha y Estado")]),t._v(" "),r("b-dropdown-item",{attrs:{href:"/comm/newrq/"+(e.item.is_national?"local":"international")+"/"+e.item.orders_id}},[t._v("   Editar Pedido")]),t._v(" "),r("b-dropdown-item",{on:{click:function(r){t.open_deliveries(e.item),t.showEntregas=!0}}},[t._v("   Adicionar Entrega")])],2):t._e()]}}],null,!1,129560396)}):t._e()],1)],1)},a=[],n=(r("b0c0"),r("b680"),r("d3b7"),r("ac1f"),r("25f0"),r("5319"),r("3e86")),s=r("3790");r("86c7");var i={name:"dashboard-commercial",metaInfo:{title:"Estado de los Pedidos"},components:{PerfectScrollbar:n["a"]},data:function(){return{commercial_data:[],arrayColors:[],arrayBack:[],arrayOrders:[],arrayOrdersMonth:[],arrayOrdersMonthWW:[],eventColorSelected:"",eventTextColorSelected:"",valorTotal:0,cptItems:[],columnsCommercialsOrders:[{key:"consumed_buffer",sortable:!0,label:"Buffer"},{key:"code_status",sortable:!0,label:"Estado"},{key:"order_code",sortable:!0,label:"#Pedido"},{key:"product_code",sortable:!0,label:"Código",stickyColumn:!0},{key:"product_description",sortable:!0,label:"Descripción",stickyColumn:!0},{key:"customer_name",sortable:!0,label:"Cliente"},{key:"requested_amount",sortable:!0,label:"Pedida"},{key:"delivered_quantity",sortable:!0,label:"Entregada"},{key:"pending_amount",sortable:!0,label:"Pendiente"},{key:"sale_price",label:"Precio Venta"},{key:"total_sale",label:"Venta Total"},{key:"order_created",sortable:!0,label:"Fecha Ingreso"},{key:"deadline",sortable:!0,label:"Fecha Compromiso"}]}},methods:{numberWithCommas:function(t){return null==t&&(t=0),t.toString().replace(/\B(?<!\.\d*)(?=(\d{3})+(?!\d))/g,",")},getContentResumen:function(){var t=this;s["a"].globalordersreport().then((function(e){t.commercial_data=e.data,t.valorTotal=t.gettotal(t.commercial_data)}))},getinfopercolor:function(t,e){if(void 0!=t[0]){t=t[0].detallecolor;for(var r=0;r<t.length;r++){var o=t[r];if(o.color==e)return o}}return 0},gettotal:function(t){var e=0;this.arrayColors=[],this.arrayBack=[];var r=t[0].detalletiempo,o={timestamp:[],valores:[]},a={timestamp:[],valores:[]};if(void 0!=t[0]){for(var n=t[0].detallecolor,s=0;s<n.length;s++){var i=n[s];e+=i.totalprice,this.arrayColors.push({name:i.color,y:i.totalprice}),"dark"==i.color?this.arrayBack.push("#181C21"):"danger"==i.color?this.arrayBack.push("#D9534F"):"warning"==i.color?this.arrayBack.push("#FFd950"):"success"==i.color?this.arrayBack.push("#02BC77"):"info"==i.color&&this.arrayBack.push("#28C3D7")}for(var c=0;c<r.length;c++){var l=r[c];o.timestamp.push([l.aaaamm]),o.valores.push([l.totalprice])}r=t[0].detallesemana;for(var d=0;d<r.length;d++){var m=r[d];r[d].aaaamm=m.aaaa+"[".concat(m.ww,"]"),a.timestamp.push([m.aaaa+"[".concat(m.ww,"]")]),a.valores.push([m.totalprice])}}return this.charts(this),this.chartsMonth(this,o,"contenedorMonth"),this.chartsMonth(this,a,"contenedorMonthWW"),e.toFixed(2)},detalle_cliente:function(t){this.arrayOrders=t.ordersdetails},getmonthcat:function(t){},charts:function(t){Highcharts.setOptions({colors:this.arrayBack}),Highcharts.chart("contenedor",{chart:{plotBackgroundColor:null,plotBorderWidth:null,plotShadow:!1,type:"pie"},title:{text:""},tooltip:{pointFormat:"<b>{point.percentage:.1f}%</b>"},plotOptions:{pie:{allowPointSelect:!0,cursor:"pointer",dataLabels:{enabled:!0,format:"{point.percentage:.1f}%",style:{color:Highcharts.theme&&Highcharts.theme.contrastTextColor||"black"}},events:{click:function(e){1!=e.point.selected?(t.eventColorSelected=e.point.name,t.eventTextColorSelected="dark"==e.point.name||"danger"==e.point.name?"text-white":"",t.cptItems=t.getinfopercolor(t.commercial_data,e.point.options.name).customerdetails):(t.cptItems=[],t.arrayOrders=[])}}}},series:[{name:"name",colorByPoint:!0,data:this.arrayColors}]})},chartsMonth:function(t,e,r){Highcharts.setOptions({colors:["#2f7ed8"]}),Highcharts.chart(r,{chart:{},title:{text:""},tooltip:{},plotOptions:{area:{fillColor:{linearGradient:{x1:0,y1:0,x2:0,y2:1},stops:[[0,Highcharts.getOptions().colors[0]],[1,Highcharts.color(Highcharts.getOptions().colors[0]).setOpacity(0).get("rgba")]]},marker:{radius:2},lineWidth:1,states:{hover:{lineWidth:1}},threshold:null,allowPointSelect:!0,cursor:"pointer",events:{click:function(e){if(e.point.category[0].includes("["))if(1!=e.point.selected)for(var r=t.commercial_data[0].detallesemana,o=0;o<r.length;o++){var a=r[o];a.aaaamm==e.point.category[0]&&(t.arrayOrdersMonthWW=a.array_to_json)}else t.arrayOrdersMonthWW=[];else if(1!=e.point.selected)for(var n=t.commercial_data[0].detalletiempo,s=0;s<n.length;s++){var i=n[s];i.aaaamm==e.point.category[0]&&(t.arrayOrdersMonth=i.pedidosmes)}else t.arrayOrdersMonth=[]}}}},xAxis:{categories:e.timestamp},series:[{type:"area",name:"Facturacion",data:e.valores}]})}},mounted:function(){},created:function(){this.getContentResumen()},beforeDestroy:function(){}},c=i,l=r("2877"),d=Object(l["a"])(c,o,a,!1,null,null,null);e["default"]=d.exports},3790:function(t,e,r){"use strict";r.d(e,"a",(function(){return i}));var o=r("bc3a"),a=r.n(o),n=r("86c7"),s={headers:{Authorization:null==localStorage.getItem("syncbox.cloud")?"":JSON.parse(localStorage.getItem("syncbox.cloud")).token}},i={orders:function(t,e){return console.log(JSON.parse(localStorage.getItem("syncbox.cloud")).token),console.log(n["n"]),a.a.post(n["n"]+"commercialsorders/"+e,t,s)},addheadorders:function(t,e){return a.a.post(n["n"]+"comercialordercontroller/"+e,t,s)},addorderdetails:function(t,e){return a.a.post(n["n"]+"comercialorderdetailcontroller/"+e,t,s)},gettrm:function(t){return a.a.get(n["n"]+"gettrm/"+t,s)},update_order_status:function(t,e){return a.a.post(n["n"]+"updateorderstatus",t,s)},purchases:function(t,e){return a.a.post(n["n"]+"commercialpurchases/"+e,t,s)},getcartera:function(t,e){return a.a.get(n["n"]+"getoutstandinginvoices/"+e+"/"+t,s)},deliveries:function(t,e){return a.a.post(n["n"]+"deliveries/"+e,t,s)},globalordersreport:function(){return a.a.get(n["n"]+"globalordersreport",s)},quotcontroller:function(t,e){return a.a.post(n["n"]+"quotcontroller/"+e,t,s)},printOrders:function(t){var e="http://localhost:3000/orders",r="POST",o=t;return a.a.request({url:e,method:r,data:o,responseType:"blob"})},sendMail:function(t){return a.a.post("http://localhost:3000/orders",t,s)}}},"3e86":function(t,e,r){"use strict";var o=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[t._t("default")],2)},a=[],n=r("b7f5"),s={name:"perfect-scrollbar",props:{options:{default:function(){}}},mounted:function(){this.$ps=new n["a"](this.$el,this.options)},beforeDestroy:function(){this.$ps&&(this.$ps.destroy(),this.$ps=null)}},i=s,c=(r("034e"),r("2877")),l=Object(c["a"])(i,o,a,!1,null,null,null);e["a"]=l.exports}}]);
//# sourceMappingURL=chunk-5955cac0.c2786369.js.map