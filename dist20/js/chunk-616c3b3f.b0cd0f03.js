(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-616c3b3f"],{"0b4b":function(t,e,i){},"452f":function(t,e,i){},"60bc":function(t,e,i){"use strict";var n=i("0b4b"),a=i.n(n);a.a},d152:function(t,e,i){"use strict";var n=i("452f"),a=i.n(n);a.a},f182:function(t,e,i){"use strict";i.r(e);var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",["CR"==t.infoMantenimiento.state||0==t.infoMantenimiento.plan_id?i("div",[i("b-alert",{attrs:{variant:t.varianMessage,dismissible:"",fade:"",show:t.showMessage},on:{dismissed:function(e){t.showMessage=!1}}},[t._v("\n            "+t._s(t.messageAlert)+"\n        ")]),t._v(" "),i("b-row",[i("b-col",{attrs:{md:"6"}},[i("b-form-group",{attrs:{label:"Nombre del Mantenimiento","label-for":"input-default"}},[i("b-form-input",{attrs:{id:"input-default",disabled:"AC"==t.infoMantenimiento.state},model:{value:t.infoMantenimiento.description,callback:function(e){t.$set(t.infoMantenimiento,"description",e)},expression:"infoMantenimiento.description"}})],1)],1),t._v(" "),i("b-col",{attrs:{md:"6"}},[i("b-form-group",{attrs:{label:"Duración en Horas del Mantenimiento","label-for":"input-default"}},[i("b-form-input",{attrs:{disabled:"AC"==t.infoMantenimiento.state},model:{value:t.infoMantenimiento.hours_duration,callback:function(e){t.$set(t.infoMantenimiento,"hours_duration",e)},expression:"infoMantenimiento.hours_duration"}})],1)],1)],1),t._v(" "),i("b-row",[i("b-col",{attrs:{md:"6"}},[null==t.infoMantenimiento.maintenance_type||"preventivo"==t.infoMantenimiento.maintenance_type||"correctivo"==t.infoMantenimiento.maintenance_type||"mejora"==t.infoMantenimiento.maintenance_type?i("b-form-group",{attrs:{label:"Tipo de Mantenimiento","label-for":"input-default"}},[i("b-select",{attrs:{disabled:"AC"==t.infoMantenimiento.state},model:{value:t.infoMantenimiento.maintenance_type,callback:function(e){t.$set(t.infoMantenimiento,"maintenance_type",e)},expression:"infoMantenimiento.maintenance_type"}},[i("option",{attrs:{value:"preventivo"}},[t._v("Preventivo")]),t._v(" "),i("option",{attrs:{value:"correctivo"}},[t._v("Correctivo")]),t._v(" "),i("option",{attrs:{value:"mejora"}},[t._v("Mejora")])])],1):t._e()],1),t._v(" "),i("b-col",{attrs:{md:"6"}},[i("b-form-group",{attrs:{label:"Prioridad","label-for":"input-default"}},[i("b-select",{attrs:{disabled:"AC"==t.infoMantenimiento.state},model:{value:t.infoMantenimiento.priority,callback:function(e){t.$set(t.infoMantenimiento,"priority",e)},expression:"infoMantenimiento.priority"}},[i("option",{attrs:{value:"alta"}},[t._v("Alta")]),t._v(" "),i("option",{attrs:{value:"media"}},[t._v("Media")]),t._v(" "),i("option",{attrs:{value:"baja"}},[t._v("Baja")])])],1)],1)],1),t._v(" "),i("b-form-group",{attrs:{"label-cols":"12",label:"Descripción"}},[i("b-form-textarea",{attrs:{disabled:"AC"==t.infoMantenimiento.state,id:"textarea",placeholder:"Descripción...",rows:"3","max-rows":"6"},model:{value:t.infoMantenimiento.problem_definition,callback:function(e){t.$set(t.infoMantenimiento,"problem_definition",e)},expression:"infoMantenimiento.problem_definition"}})],1),t._v(" "),i("div",{staticClass:"text-right"},[i("b-button",{attrs:{size:"md",variant:"success"},on:{click:function(e){return t.savePlan()}}},[t._v("Guardar")])],1)],1):t._e(),t._v(" "),"CR"!=t.infoMantenimiento.state&&0!=t.infoMantenimiento.plan_id?i("div",{staticClass:"text-center"},[i("h3",{staticStyle:{"margin-bottom":"5px"}},[t._v("\n            "+t._s(t.infoMantenimiento.description)+"\n        ")]),t._v(" "),i("h4",[t._v("\n            # OT: "),i("small",{staticClass:"text-muted"},[t._v(t._s(t.infoMantenimiento.plan_id))]),t._v(" Duracion: "),i("small",{staticClass:"text-muted"},[t._v(t._s(t.infoMantenimiento.hours_duration)+" (h)")]),t._v(" Tipo: "),i("small",{staticClass:"text-muted"},[t._v(t._s(t.infoMantenimiento.maintenance_type)+" ")]),t._v(" Prioridad: "),i("small",{staticClass:"text-muted"},[t._v(t._s(t.infoMantenimiento.priority))])]),t._v(" "),i("p",[t._v("\n            "+t._s(t.infoMantenimiento.problem_definition)+"\n        ")])]):t._e(),t._v(" "),i("b-tabs",{attrs:{"content-class":"mt-3",active:""}},["preventivo"==t.infoMantenimiento.maintenance_type?i("b-tab",{attrs:{title:"Frecuencias",disabled:0==t.infoMantenimiento.plan_id}},["CR"==t.infoMantenimiento.state?i("div",{staticClass:"row"},[i("div",{staticClass:"col-md-5"},[i("b",[t._v(" Unidades de Medida ")]),t._v(" "),i("b-select",{model:{value:t.infoDuration.code_duration,callback:function(e){t.$set(t.infoDuration,"code_duration",e)},expression:"infoDuration.code_duration"}},[i("option",{attrs:{value:"hours_operations"}},[t._v("Horas de Operación")]),t._v(" "),i("option",{attrs:{value:"max_days"}},[t._v("Número de Días")]),t._v(" "),i("option",{attrs:{value:"cycles"}},[t._v("Ciclos")]),t._v(" "),i("option",{attrs:{value:"km"}},[t._v("Kilometros")])])],1),t._v(" "),i("div",{staticClass:"col-md-4"},[i("b",[t._v(" Valor Maximo ")]),t._v(" "),i("b-input",{attrs:{type:"number"},model:{value:t.infoDuration.max_value,callback:function(e){t.$set(t.infoDuration,"max_value",e)},expression:"infoDuration.max_value"}})],1),t._v(" "),i("div",{staticClass:"col-md-3"},[t._v("\n                       \n                    "),i("b-btn",{attrs:{variant:"outline-success",block:""},on:{click:t.saveDuration}},[i("i",{staticClass:"ion ion-md-add"}),t._v("   Adicionar Configuracion ")])],1)]):t._e(),t._v(" "),i("div",[i("b-table",{staticClass:"mt-2",attrs:{small:"","show-empty":"",stacked:"md",items:t.infoMeasure,fields:t.columnsMeasure},scopedSlots:t._u([{key:"cell(edit)",fn:function(e){return["CR"==t.infoMantenimiento.state?i("div",{staticClass:"text-center"},[i("b-btn",{staticClass:"btn-xs",attrs:{variant:"outline-success borderless icon-btn"},on:{click:function(i){i.preventDefault(),t.infoDuration=e.item}}},[i("i",{staticClass:"ion ion-md-create"})]),t._v(" "),i("b-btn",{staticClass:"btn-xs",attrs:{variant:"outline-danger borderless icon-btn"},on:{click:function(i){return i.preventDefault(),t.removeDuration(e.item)}}},[i("i",{staticClass:"ion ion-md-close"})])],1):t._e()]}}],null,!1,574971418)})],1)]):t._e(),t._v(" "),i("b-tab",{attrs:{title:"Actividades",disabled:0==t.infoMantenimiento.plan_id},on:{click:function(e){return t.getActivities()}}},[i("b-card",{staticClass:"mb-2",attrs:{"no-body":""}},[i("b-card-header",[i("a",{directives:[{name:"b-toggle",rawName:"v-b-toggle.accordion2-1",modifiers:{"accordion2-1":!0}}],staticClass:"d-flex justify-content-between text-body",attrs:{href:"javascript:void(0)"}},[t._v("\n                        Adicionar Informacion\n                        "),i("div",{staticClass:"collapse-icon"})])]),t._v(" "),i("b-collapse",{attrs:{id:"accordion2-1",visible:!1,accordion:"accordion2"}},[i("b-card-body",[i("b-row",[i("b-col",{attrs:{md:"6"}},[i("b-form-group",{attrs:{label:"Tipo de Acción"}},[i("b-select",{model:{value:t.infoActivities.activity_action,callback:function(e){t.$set(t.infoActivities,"activity_action",e)},expression:"infoActivities.activity_action"}},[i("option",{attrs:{value:"1"}},[t._v("Reemplazo")]),t._v(" "),i("option",{attrs:{value:"2"}},[t._v("Matenimiento")]),t._v(" "),i("option",{attrs:{value:"3"}},[t._v("Inspección")]),t._v(" "),i("option",{attrs:{value:"4"}},[t._v("Revisión")]),t._v(" "),i("option",{attrs:{value:"5"}},[t._v("Otra")])])],1)],1),t._v(" "),i("b-col",{attrs:{md:"6"}},[i("b-form-group",{attrs:{label:"Descripción de la Actividad"}},[i("b-form-input",{model:{value:t.infoActivities.description,callback:function(e){t.$set(t.infoActivities,"description",e)},expression:"infoActivities.description"}})],1)],1)],1),t._v(" "),i("b-form-row",[i("b-form-group",{staticClass:"col-md-6",attrs:{label:"Seleccione una Parte"}},[i("b-input-group",[t.loading?i("b-input-group-text",{attrs:{slot:"prepend"},slot:"prepend"},[i("i",{staticClass:"ion ion-md-sync"})]):t._e(),t._v(" "),t.loading?t._e():i("b-input-group-text",{attrs:{slot:"prepend"},slot:"prepend"},[i("i",{staticClass:"ion ion-ios-search"})]),t._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:t.valueSelectedSupplier,expression:"valueSelectedSupplier"}],staticClass:"form-control",attrs:{type:"text",placeholder:"Seleccione una Parte",autocomplete:"off"},domProps:{value:t.valueSelectedSupplier},on:{keydown:[function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"down",40,e.key,["Down","ArrowDown"])?null:t.down(e)},function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"up",38,e.key,["Up","ArrowUp"])?null:t.up(e)},function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.hit(e)},function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"esc",27,e.key,["Esc","Escape"])?null:t.reset(e)}],blur:t.reset,input:[function(e){e.target.composing||(t.valueSelectedSupplier=e.target.value)},t.updateQuerySupplier]}}),t._v(" "),t.isDirty||t.valueSelectedSupplier?i("b-input-group-text",{attrs:{slot:"append"},on:{click:t.resetInput},slot:"append"},[i("i",{staticClass:"ion ion-md-close"})]):t._e()],1),t._v(" "),i("div",{staticClass:"dropdown-menu",class:{"d-block":t.hasItems},style:{left:t.isRTL?"auto":0,right:t.isRTL?0:"auto"}},t._l(t.items,(function(e,n){return i("a",{staticClass:"dropdown-item",class:t.activeClass(n),attrs:{href:"javascript:void(0)"},on:{mousedown:t.hit,mousemove:function(e){return t.setActive(n)}}},[i("span",{staticClass:"name",domProps:{textContent:t._s(e.code)}}),t._v(" "),i("span",{staticClass:"text-muted"},[t._v(t._s(e.description))])])})),0)],1),t._v(" "),i("b-form-group",{staticClass:"col-md-6",attrs:{label:"Cantidad de Partes Incluidas"}},[i("b-form-input",{attrs:{type:"number"},model:{value:t.infoActivities.amount,callback:function(e){t.$set(t.infoActivities,"amount",e)},expression:"infoActivities.amount"}})],1)],1),t._v(" "),i("div",{staticClass:"text-right"},[i("div",[i("b-btn",{directives:[{name:"b-modal",rawName:"v-b-modal.modals-default",modifiers:{"modals-default":!0}}],staticClass:"btn-sm",attrs:{variant:"outline-info"},on:{click:function(e){e.preventDefault(),t.infoProviders={},t.valueSelectedSupplier=""}}},[i("i",{staticClass:"ion ion-md-close"},[t._v(" Borrar ")])]),t._v(" "),i("b-btn",{directives:[{name:"b-modal",rawName:"v-b-modal.modals-default",modifiers:{"modals-default":!0}}],staticClass:"btn-sm",attrs:{variant:"outline-success"},on:{click:function(e){return e.preventDefault(),t.saveActivities()}}},[i("i",{staticClass:"ion ion-md-checkmark"}),t._v(" Adicionar ")])],1)])],1)],1)],1),t._v(" "),i("b-table",{staticClass:"mt-2",attrs:{small:"","show-empty":"",stacked:"md",items:t.dataActivities,fields:t.columnsActivities},scopedSlots:t._u([{key:"cell(activity_action_code)",fn:function(e){return[i("div",{staticClass:"text-left"},[e.item.done?i("b-btn",{staticClass:"btn-xs",attrs:{variant:"outline-success borderless icon-btn"},on:{click:function(i){return i.preventDefault(),t.deleteActivities(e.item,"change-done")}}},[i("i",{staticClass:"fas fa-circle"})]):t._e(),t._v(" "),e.item.done?t._e():i("b-btn",{staticClass:"btn-xs",attrs:{variant:"outline-danger borderless icon-btn"},on:{click:function(i){return i.preventDefault(),t.deleteActivities(e.item,"change-done")}}},[i("i",{staticClass:"fas fa-circle"})]),t._v("\n                        "+t._s(e.item.activity_action_code)+"\n                    ")],1)]}},{key:"cell(action)",fn:function(e){return["CR"==t.infoMantenimiento.state||"CR"!=t.infoMantenimiento.state&&!e.item.is_planned?i("div",{staticClass:"text-left"},[i("b-btn",{staticClass:"btn-xs",attrs:{variant:"outline-success borderless icon-btn"},on:{click:function(i){i.preventDefault(),t.infoActivities=e.item,t.valueSelectedSupplier=e.item.part}}},[i("i",{staticClass:"ion ion-md-create"})]),t._v(" "),i("b-btn",{staticClass:"btn-xs",attrs:{variant:"outline-danger borderless icon-btn"},on:{click:function(i){return i.preventDefault(),t.deleteActivities(e.item,"delete")}}},[i("i",{staticClass:"ion ion-md-close"})])],1):t._e()]}}])})],1),t._v(" "),i("b-tab",{attrs:{title:"Recursos Sugeridos",disabled:0==t.infoMantenimiento.plan_id},on:{click:function(e){return t.calcularPartes()}}},[i("b-table",{staticClass:"mt-2",attrs:{small:"","show-empty":"",stacked:"md",items:t.dataParts,fields:t.columnsParts},scopedSlots:t._u([{key:"cell(action)",fn:function(e){return["AC"==t.infoMantenimiento.state?i("div",{staticClass:"text-left"},[i("b-dd",{attrs:{variant:"default",text:"Acciones",right:t.isRTL,size:"xs"}},[i("b-dd-item",{attrs:{variant:1==e.item.action?"success":"danger"},on:{click:function(i){return i.preventDefault(),t.changePart(e.item,"event",1)}}},[i("i",{staticClass:"fas fa-sync"}),t._v("   Reemplazar Parte")]),t._v(" "),i("b-dd-item",{attrs:{variant:2==e.item.action?"success":"danger"},on:{click:function(i){return i.preventDefault(),t.changePart(e.item,"event",2)}}},[i("i",{staticClass:"fas fa-exclamation"}),t._v("   Ejecutar Mantenimiento")]),t._v(" "),i("b-dd-divider"),t._v(" "),null!=e.item.plan_assets_parts_id?i("b-dd-item",{on:{click:function(i){return i.preventDefault(),t.changePart(e.item,"delete")}}},[i("i",{staticClass:"ion ion-md-close text-danger"}),t._v("   Eliminar Acción")]):t._e()],1)],1):i("div",[t._v("\n                        "+t._s("1"==e.item.action?"Reemplazar Parte":"Ejecutar Mantenimiento")+"\n                    ")])]}},{key:"cell(description)",fn:function(e){return[i("div",{staticClass:"text-left"},[t._v("\n                        "+t._s(e.item.description)+"\n                            "),null!=e.item.plan_assets_parts_id?i("b-badge",{attrs:{variant:1==e.item.action_part?"success":"warning"}},[t._v(t._s(1==e.item.action_part?"Reemplazo":"Mantenimiento"))]):t._e()],1)]}},{key:"cell(percentage_use_pending)",fn:function(e){return[i("div",{staticClass:"text-left"},[i("b-btn",{staticClass:"btn-xs",attrs:{variant:"outline-success borderless icon-btn"},on:{click:function(t){return t.preventDefault(),e.toggleDetails(t)}}},[i("i",{staticClass:"fas fa-info"})]),t._v(" "),i("span",[t._v("\n                            "+t._s(e.item.percentage_use_pending)+"\n                        ")])],1)]}},{key:"row-details",fn:function(e){return[i("b-table",{staticClass:"mt-2",attrs:{small:"","show-empty":"",stacked:"md",items:e.item.details,fields:[{key:"duration",label:"Unidade de Medida"},{key:"max_value",label:"Valor Maximo"},{key:"current_value",label:"Valor Actual"},{key:"pending_use",label:"Uso Pendiente"},{key:"percentage_use_pending",label:"% de Uso"}]},scopedSlots:t._u([{key:"cell(duration)",fn:function(e){return[i("div",{staticClass:"text-left"},[i("b-btn",{staticClass:"btn-xs",attrs:{variant:"outline-success borderless icon-btn"},on:{click:function(t){return t.preventDefault(),e.toggleDetails(t)}}},[i("i",{staticClass:"fas fa-info"})]),t._v(" "),i("span",[t._v("\n                                    "+t._s(e.item.duration)+"\n                                ")])],1)]}},{key:"row-details",fn:function(e){return[i("b",[t._v("Accion Sugerida")]),t._v(" "),i("hr"),t._v("\n                            "+t._s(e.item.details)+"\n                        ")]}}],null,!0)})]}}])})],1),t._v(" "),i("b-tab",{attrs:{title:"Personal a Cargo",disabled:0==t.infoMantenimiento.plan_id},on:{click:function(e){return t.getPersonl()}}},[i("b-card",{staticClass:"mb-2",attrs:{"no-body":""}},[i("b-card-header",[i("a",{directives:[{name:"b-toggle",rawName:"v-b-toggle.accordion3-1",modifiers:{"accordion3-1":!0}}],staticClass:"d-flex justify-content-between text-body",attrs:{href:"javascript:void(0)"}},[t._v("\n                        Adicionar Informacion\n                        "),i("div",{staticClass:"collapse-icon"})])]),t._v(" "),i("b-collapse",{attrs:{id:"accordion3-1",visible:!1,accordion:"accordion3"}},[i("b-card-body",[i("b-row",[i("b-col",{attrs:{md:"5"}},[i("b-form-group",{attrs:{label:"Personal Estimado","label-for":"input-default"}},[i("multiselect",{attrs:{options:t.info_operator,label:"concat",searchable:!0,"show-labels":!1,placeholder:"Asiste Llamado"},model:{value:t.itemselected,callback:function(e){t.itemselected=e},expression:"itemselected"}})],1)],1),t._v(" "),i("b-col",{attrs:{md:"5"}},[i("b-form-group",{attrs:{label:"Tiempo Estimado (h)","label-for":"input-default"}},[i("b-form-input",{attrs:{type:"number"},model:{value:t.infoPersonal.expected_time_hour,callback:function(e){t.$set(t.infoPersonal,"expected_time_hour",e)},expression:"infoPersonal.expected_time_hour"}})],1)],1),t._v(" "),i("b-col",{attrs:{md:"2"}},[i("b-form-group",{attrs:{label:" . ","label-for":"input-default"}},[i("b-button",{attrs:{variant:null==this.itemselected.wscode?"outline-success icon-btn":"outline-warning icon-btn"},on:{click:function(e){return t.savePersonl()}}},[i("i",{staticClass:"ion ion-md-checkmark"})]),t._v(" "),i("b-button",{attrs:{variant:null==this.itemselected.wscode?"outline-info icon-btn":"outline-warning icon-btn"},on:{click:function(e){t.getPersonl(),t.itemselected={},t.infoPersonal={}}}},[i("i",{staticClass:"ion ion-md-close"})])],1)],1)],1)],1)],1)],1),t._v(" "),i("b-table",{staticClass:"mt-2",attrs:{small:"","show-empty":"",stacked:"md",items:t.dataPersonal,fields:t.columnsPersonal},scopedSlots:t._u([{key:"cell(personal)",fn:function(e){return[i("div",{staticClass:"text-left"},[t._v("\n                        "+t._s(e.item.name+" "+e.item.lastname)+"\n                    ")])]}},{key:"cell(realtime_hour)",fn:function(e){return[i("div",{staticClass:"w-100 text-left"},[i("div",{directives:[{name:"show",rawName:"v-show",value:!t.modify_realtime_hour[e.index]["id"+e.item.plan_personal_id],expression:"!modify_realtime_hour[row.index]['id'+row.item.plan_personal_id]"}]},[i("b-btn",{staticClass:"btn-xs",attrs:{variant:"outline-success borderless icon-btn"},on:{click:function(i){return t.changeStateEditValue(e)}}},[i("i",{staticClass:"ion ion-md-create"})]),t._v("\n                            "+t._s(null==e.item.realtime_hour?0:e.item.realtime_hour)+"\n                        ")],1),t._v(" "),i("b-input-group",{directives:[{name:"show",rawName:"v-show",value:t.modify_realtime_hour[e.index]["id"+e.item.plan_personal_id],expression:"modify_realtime_hour[row.index]['id'+row.item.plan_personal_id]"}],attrs:{size:"sm"}},[i("b-form-input",{attrs:{placeholder:"Duración Real (h)"},model:{value:t.infoPersonal.realtime_hour,callback:function(e){t.$set(t.infoPersonal,"realtime_hour",e)},expression:"infoPersonal.realtime_hour"}}),t._v(" "),i("b-input-group-append",[i("b-btn",{attrs:{variant:"success"},on:{click:function(e){return t.editValuePersonal()}}},[i("span",{staticClass:"ion ion-md-checkmark"})]),t._v(" "),i("b-btn",{attrs:{variant:"danger"},on:{click:function(i){t.getPersonl(),t.modify_realtime_hour[e.index]["id"+e.item.plan_personal_id]=!1}}},[i("span",{staticClass:"ion ion-md-close"})])],1)],1)],1)]}},{key:"cell(action)",fn:function(e){return["CR"==t.infoMantenimiento.state||"CR"!=t.infoMantenimiento.state&&!e.item.is_planned?i("div",{staticClass:"text-left"},[i("b-btn",{staticClass:"btn-xs",attrs:{variant:"outline-success borderless icon-btn"},on:{click:function(i){return i.preventDefault(),t.loadPersonalEdit(e.item)}}},[i("i",{staticClass:"ion ion-md-create"})]),t._v(" "),i("b-btn",{staticClass:"btn-xs",attrs:{variant:"outline-danger borderless icon-btn"},on:{click:function(i){return i.preventDefault(),t.deletePersonal(e.item)}}},[i("i",{staticClass:"ion ion-md-close"})])],1):t._e()]}}])})],1),t._v(" "),i("b-tab",{attrs:{title:"Proveedores",disabled:0==t.infoMantenimiento.plan_id},on:{click:function(e){return t.getSupplier()}}},[i("b-card",{staticClass:"mb-2",attrs:{"no-body":""}},[i("b-card-header",[i("a",{directives:[{name:"b-toggle",rawName:"v-b-toggle.accordion4-1",modifiers:{"accordion4-1":!0}}],staticClass:"d-flex justify-content-between text-body",attrs:{href:"javascript:void(0)"}},[t._v("\n                        Adicionar Informacion\n                        "),i("div",{staticClass:"collapse-icon"})])]),t._v(" "),i("b-collapse",{attrs:{id:"accordion4-1",visible:!1,accordion:"accordion4"}},[i("b-card-body",[i("b-form",[i("b-form-row",[i("b-form-group",{staticClass:"col-md-6",attrs:{label:"Actividad a Realizar"}},[i("b-input",{attrs:{placeholder:"Actividad a Realizar"},model:{value:t.infoProviders.activity,callback:function(e){t.$set(t.infoProviders,"activity",e)},expression:"infoProviders.activity"}})],1),t._v(" "),i("b-form-group",{staticClass:"col-md-6",attrs:{label:"Seleccione un Proveedor"}},[i("b-input-group",[t.loading?i("b-input-group-text",{attrs:{slot:"prepend"},slot:"prepend"},[i("i",{staticClass:"ion ion-md-sync"})]):t._e(),t._v(" "),t.loading?t._e():i("b-input-group-text",{attrs:{slot:"prepend"},slot:"prepend"},[i("i",{staticClass:"ion ion-ios-search"})]),t._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:t.valueSelectedSupplier,expression:"valueSelectedSupplier"}],staticClass:"form-control",attrs:{type:"text",placeholder:"Seleccione un proveedor",autocomplete:"off"},domProps:{value:t.valueSelectedSupplier},on:{keydown:[function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"down",40,e.key,["Down","ArrowDown"])?null:t.down(e)},function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"up",38,e.key,["Up","ArrowUp"])?null:t.up(e)},function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.hit(e)},function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"esc",27,e.key,["Esc","Escape"])?null:t.reset(e)}],blur:t.reset,input:[function(e){e.target.composing||(t.valueSelectedSupplier=e.target.value)},t.updateQuerySupplier]}}),t._v(" "),t.isDirty||t.valueSelectedSupplier?i("b-input-group-text",{attrs:{slot:"append"},on:{click:t.resetInput},slot:"append"},[i("i",{staticClass:"ion ion-md-close"})]):t._e()],1),t._v(" "),i("div",{staticClass:"dropdown-menu",class:{"d-block":t.hasItems},style:{left:t.isRTL?"auto":0,right:t.isRTL?0:"auto"}},t._l(t.items,(function(e,n){return i("a",{staticClass:"dropdown-item",class:t.activeClass(n),attrs:{href:"javascript:void(0)"},on:{mousedown:t.hit,mousemove:function(e){return t.setActive(n)}}},[i("span",{staticClass:"name",domProps:{textContent:t._s(e.nit)}}),t._v(" "),i("span",{staticClass:"text-muted"},[t._v(t._s(e.name))])])})),0)],1)],1),t._v(" "),i("b-form-row",[i("b-form-group",{staticClass:"col-md-4",attrs:{label:"Orden de Compra"}},[i("b-input",{attrs:{placeholder:"Orden de Compra"},model:{value:t.infoProviders.oc,callback:function(e){t.$set(t.infoProviders,"oc",e)},expression:"infoProviders.oc"}})],1),t._v(" "),i("b-form-group",{staticClass:"col-md-4",attrs:{label:"Tiempo Estimado (h)"}},[i("b-input",{attrs:{placeholder:"Tiempo Estimado"},model:{value:t.infoProviders.expected_time_hour,callback:function(e){t.$set(t.infoProviders,"expected_time_hour",e)},expression:"infoProviders.expected_time_hour"}})],1),t._v(" "),i("b-form-group",{staticClass:"col-md-4",attrs:{label:"Precio"}},[i("b-input",{attrs:{type:"number",step:"0.1",placeholder:"Precio"},model:{value:t.infoProviders.cost_per_hour,callback:function(e){t.$set(t.infoProviders,"cost_per_hour",e)},expression:"infoProviders.cost_per_hour"}})],1)],1),t._v(" "),i("div",{staticClass:"text-right"},[i("div",[i("b-btn",{directives:[{name:"b-modal",rawName:"v-b-modal.modals-default",modifiers:{"modals-default":!0}}],staticClass:"btn-sm",attrs:{variant:"outline-info"},on:{click:function(e){e.preventDefault(),t.infoProviders={},t.valueSelectedSupplier=""}}},[i("i",{staticClass:"ion ion-md-close"},[t._v(" Borrar ")])]),t._v(" "),i("b-btn",{directives:[{name:"b-modal",rawName:"v-b-modal.modals-default",modifiers:{"modals-default":!0}}],staticClass:"btn-sm",attrs:{variant:"outline-success"},on:{click:function(e){return e.preventDefault(),t.saveSupplier()}}},[i("i",{staticClass:"ion ion-md-checkmark"}),t._v(" Adicionar ")])],1)])],1)],1)],1)],1),t._v(" "),i("b-table",{staticClass:"mt-2",attrs:{small:"","show-empty":"",stacked:"md",items:t.dataSupplier,fields:t.columnsSupplier},scopedSlots:t._u([{key:"cell(realtime_hour)",fn:function(e){return[i("div",{staticClass:"w-100 text-left"},[i("div",{directives:[{name:"show",rawName:"v-show",value:!t.modify_realtime_hour_supplier[e.index]["idx"+e.item.plan_supplier_id],expression:"!modify_realtime_hour_supplier[row.index]['idx'+row.item.plan_supplier_id]"}]},[i("b-btn",{staticClass:"btn-xs",attrs:{variant:"outline-success borderless icon-btn"},on:{click:function(i){return t.changeStateEditValueSupplir(e)}}},[i("i",{staticClass:"ion ion-md-create"})]),t._v("\n                            "+t._s(null==e.item.realtime_hour?0:e.item.realtime_hour)+"\n                        ")],1),t._v(" "),i("b-input-group",{directives:[{name:"show",rawName:"v-show",value:t.modify_realtime_hour_supplier[e.index]["idx"+e.item.plan_supplier_id],expression:"modify_realtime_hour_supplier[row.index]['idx'+row.item.plan_supplier_id]"}],attrs:{size:"sm"}},[i("b-form-input",{attrs:{placeholder:"Duración Real (h)"},model:{value:t.infoProviders.realtime_hour,callback:function(e){t.$set(t.infoProviders,"realtime_hour",e)},expression:"infoProviders.realtime_hour"}}),t._v(" "),i("b-input-group-append",[i("b-btn",{attrs:{variant:"success"},on:{click:function(e){return t.editValueSupplier()}}},[i("span",{staticClass:"ion ion-md-checkmark"})]),t._v(" "),i("b-btn",{attrs:{variant:"danger"},on:{click:function(i){t.getSupplier(),t.modify_realtime_hour_supplier[e.index]["idx"+e.item.plan_supplier_id]=!1}}},[i("span",{staticClass:"ion ion-md-close"})])],1)],1)],1)]}},{key:"cell(real_cost)",fn:function(e){return[i("div",{staticClass:"w-100 text-left"},[i("div",{directives:[{name:"show",rawName:"v-show",value:!t.modify_realtime_hour_supplier[e.index]["idx"+e.item.plan_supplier_id],expression:"!modify_realtime_hour_supplier[row.index]['idx'+row.item.plan_supplier_id]"}]},[i("b-btn",{staticClass:"btn-xs",attrs:{variant:"outline-success borderless icon-btn"},on:{click:function(i){return t.changeStateEditValueSupplir(e)}}},[i("i",{staticClass:"ion ion-md-create"})]),t._v("\n                            "+t._s(null==e.item.real_cost?0:e.item.real_cost)+"\n                        ")],1),t._v(" "),i("b-input-group",{directives:[{name:"show",rawName:"v-show",value:t.modify_realtime_hour_supplier[e.index]["idx"+e.item.plan_supplier_id],expression:"modify_realtime_hour_supplier[row.index]['idx'+row.item.plan_supplier_id]"}],attrs:{size:"sm"}},[i("b-form-input",{attrs:{placeholder:"Duración Real (h)"},model:{value:t.infoProviders.real_cost,callback:function(e){t.$set(t.infoProviders,"real_cost",e)},expression:"infoProviders.real_cost"}}),t._v(" "),i("b-input-group-append",[i("b-btn",{attrs:{variant:"success"},on:{click:function(e){return t.editValueSupplier()}}},[i("span",{staticClass:"ion ion-md-checkmark"})]),t._v(" "),i("b-btn",{attrs:{variant:"danger"},on:{click:function(i){t.getSupplier(),t.modify_realtime_hour_supplier[e.index]["idx"+e.item.plan_supplier_id]=!1}}},[i("span",{staticClass:"ion ion-md-close"})])],1)],1)],1)]}},{key:"cell(action)",fn:function(e){return["CR"==t.infoMantenimiento.state||"CR"!=t.infoMantenimiento.state&&!e.item.is_planned?i("div",{staticClass:"text-left"},[i("b-btn",{staticClass:"btn-xs",attrs:{variant:"outline-success borderless icon-btn"},on:{click:function(i){return i.preventDefault(),t.loadSupplierEdit(e.item)}}},[i("i",{staticClass:"ion ion-md-create"})]),t._v(" "),i("b-btn",{staticClass:"btn-xs",attrs:{variant:"outline-danger borderless icon-btn"},on:{click:function(i){return i.preventDefault(),t.deleteSupplier(e.item.plan_supplier_id)}}},[i("i",{staticClass:"ion ion-md-close"})])],1):t._e()]}}])})],1),t._v(" "),i("b-tab",{attrs:{title:"Otros Costos",disabled:0==t.infoMantenimiento.plan_id},on:{click:function(e){t.infoProviders={}}}},[i("b-card",{staticClass:"mb-2",attrs:{"no-body":""}},[i("b-card-header",[i("a",{directives:[{name:"b-toggle",rawName:"v-b-toggle.accordion5-1",modifiers:{"accordion5-1":!0}}],staticClass:"d-flex justify-content-between text-body",attrs:{href:"javascript:void(0)"}},[t._v("\n                        Adicionar Informacion\n                        "),i("div",{staticClass:"collapse-icon"})])]),t._v(" "),i("b-collapse",{attrs:{id:"accordion5-1",visible:!1,accordion:"accordion5"}},[i("b-card-body",[i("b-form",[i("b-form-row",[i("b-form-group",{staticClass:"col-md-4",attrs:{label:"Actividad a Realizar"}},[i("b-input",{attrs:{placeholder:"Actividad a Realizar"},model:{value:t.infoProviders.activity,callback:function(e){t.$set(t.infoProviders,"activity",e)},expression:"infoProviders.activity"}})],1),t._v(" "),i("b-form-group",{staticClass:"col-md-4",attrs:{label:"Costo Estimado",disabled:t.infoProviders.is_planned&&"CR"!=t.infoMantenimiento.state}},[i("b-input",{attrs:{type:"number",placeholder:"Costo Estimado"},model:{value:t.infoProviders.estimated_cost,callback:function(e){t.$set(t.infoProviders,"estimated_cost",e)},expression:"infoProviders.estimated_cost"}})],1),t._v(" "),i("b-form-group",{staticClass:"col-md-4",attrs:{label:"Costo Real"}},[i("b-input",{attrs:{type:"number",placeholder:"Costo Real"},model:{value:t.infoProviders.real_cost,callback:function(e){t.$set(t.infoProviders,"real_cost",e)},expression:"infoProviders.real_cost"}})],1)],1),t._v(" "),i("div",{staticClass:"text-right"},[i("div",[i("b-btn",{directives:[{name:"b-modal",rawName:"v-b-modal.modals-default",modifiers:{"modals-default":!0}}],staticClass:"btn-sm",attrs:{variant:"outline-info"},on:{click:function(e){e.preventDefault(),t.infoProviders={}}}},[i("i",{staticClass:"ion ion-md-close"},[t._v(" Borrar ")])]),t._v(" "),i("b-btn",{directives:[{name:"b-modal",rawName:"v-b-modal.modals-default",modifiers:{"modals-default":!0}}],staticClass:"btn-sm",attrs:{variant:"outline-success"},on:{click:function(e){return e.preventDefault(),t.addCostsInfo()}}},[i("i",{staticClass:"ion ion-md-checkmark"}),t._v(" Adicionar ")])],1)])],1)],1)],1)],1),t._v(" "),i("b-table",{staticClass:"mt-2",attrs:{small:"","show-empty":"",stacked:"md",items:t.infoMantenimiento.costs,fields:t.itemCostos},scopedSlots:t._u([{key:"cell(action)",fn:function(e){return[i("div",{staticClass:"text-left"},[i("b-btn",{staticClass:"btn-xs",attrs:{variant:"outline-success borderless icon-btn"},on:{click:function(i){return i.preventDefault(),t.loadSupplierEdit(e.item)}}},[i("i",{staticClass:"ion ion-md-create"})]),t._v(" "),"CR"==t.infoMantenimiento.state||"CR"!=t.infoMantenimiento.state&&!e.item.is_planned?i("b-btn",{staticClass:"btn-xs",attrs:{variant:"outline-danger borderless icon-btn"},on:{click:function(i){return i.preventDefault(),t.deleteSupplier(e.item.plan_supplier_id)}}},[i("i",{staticClass:"ion ion-md-close"})]):t._e()],1)]}}])})],1),t._v(" "),i("b-tab",{attrs:{title:"Historial",disabled:0==t.infoMantenimiento.plan_id},on:{click:function(e){return t.historyChangeStates()}}},["CR"!=t.infoMantenimiento.state?i("b-form-group",{attrs:{"label-cols":"12",label:"Detalle"}},[i("b-form-textarea",{attrs:{id:"textarea",placeholder:"Detalle...",rows:"3","max-rows":"6"},model:{value:t.infoMantenimiento.event_definition,callback:function(e){t.$set(t.infoMantenimiento,"event_definition",e)},expression:"infoMantenimiento.event_definition"}})],1):t._e(),t._v(" "),i("div",{staticClass:"text-right"},[i("b-button",{attrs:{size:"sm",variant:"outline-success"},on:{click:function(e){return t.savePlan()}}},[t._v("Guardar")])],1),t._v(" "),i("h4",[t._v("Historial Cambio de Estados")]),t._v(" "),i("b-table",{staticClass:"mt-2",attrs:{small:"","show-empty":"",stacked:"md",items:t.infoStatesLogs,fields:[{key:"fecha",label:"Fecha"},{key:"description",label:"Estado"},{key:"Usuario",label:"Usuario"},{key:"comentario",label:"Comentario"}]}})],1),t._v(" "),i("b-tab",{attrs:{title:"Resultados",disabled:0==t.infoMantenimiento.plan_id},on:{click:function(e){return t.getFinalResult()}}},[i("div",{staticClass:"text-center"},[i("i",{staticClass:"fas fa-minus text-danger"},[t._v("  Costos No Planeados")]),t._v("   "),i("i",{staticClass:"fas fa-check text-success"},[t._v("  Costos Planeados")])]),t._v(" "),i("b-table",{staticClass:"mt-2",attrs:{small:"","show-empty":"",stacked:"md",items:t.totalCostPlan,fields:[{key:"entity",label:"Origen"},{key:"expected_time_hours",label:"Horas Estimadas"},{key:"realtime_hour",label:"Horas Reales"},{key:"desviacion_h",label:"% Desviacion (h)"},{key:"estimated_cost",label:"Costo Estimado"},{key:"real_cost",label:"Costo Real"},{key:"desviacion",label:"% Desviacion ($)"}]},scopedSlots:t._u([{key:"cell(entity)",fn:function(e){return[i("div",{staticClass:"w-100 text-left"},["TOTAL"!=e.item.entity?i("div",[e.item.is_planned||null==e.item.is_planned?t._e():i("i",{staticClass:"fas fa-minus text-danger"}),t._v(" "),e.item.is_planned?i("i",{staticClass:"fas fa-check text-success"}):t._e(),t._v("\n                            "+t._s(e.item.entity)+"\n                        ")]):i("div",[i("b",[t._v(t._s(e.item.entity))])])])]}},{key:"cell(desviacion)",fn:function(e){return[i("div",{staticClass:"w-100 text-left"},[t._v("\n                        \n                        "+t._s((100*(0==e.item.estimated_cost?0:1-e.item.estimated_cost/e.item.real_cost)).toFixed(2))+"\n                    ")])]}},{key:"cell(desviacion_h)",fn:function(e){return[i("div",{staticClass:"w-100 text-left"},[t._v("\n                        \n                        "+t._s((100*(0==e.item.expected_time_hours?0:1-e.item.expected_time_hours/e.item.realtime_hour)).toFixed(2))+"\n                    ")])]}}])}),t._v(" "),i("div",{staticClass:"text-right"},[i("b-button",{attrs:{size:"md",variant:"danger"},on:{click:function(e){return t.liquidarOrden()}}},[t._v("Liquidar Orden")])],1)],1)],1)],1)},a=[],s=(i("e01a"),i("b0c0"),i("a9e3"),i("ade3")),o=(i("bc3a"),i("ff5a")),l=i.n(o),r=i("9b97"),c=i("8e5f"),d=i.n(c),u=i("86c7");var p={props:{assets_id:{type:Number},infoDetalle:{type:Object}},extends:l.a,components:{Multiselect:d.a},data:function(){var t,e;return e={totalCostPlan:[],showMessage:!1,messageAlert:"",varianMessage:"",columnsSupplier:[{key:"activity",label:"Actividad"},{key:"supplier",label:"Proveedor"},{key:"oc",label:"Orden Compra / Trabajo"},{key:"cost_per_hour",label:"Costo por Hora"},{key:"expected_time_hour",label:"Duración Estimada (h)"},{key:"realtime_hour",label:"Duración Real (h)"},{key:"real_cost",label:"Costo Real"},{key:"action",label:"Accion"}],dataSupplier:[],infoStatesLogs:[],itemCostos:[{key:"activity",label:"Actividad"},{key:"estimated_cost",label:"Costo Estimado"},{key:"real_cost",label:"Costo Real"},{key:"action",label:"Accion"}],src:"",modify_realtime_hour:[],infoPersonal:{},infoPersonal_2:{},dataPersonal:[],columnsPersonal:[{key:"personal",label:"Personal"},{key:"position",label:"Cargo"},{key:"expected_time_hour",label:"Duración Estimada (h)"},{key:"realtime_hour",label:"Duración Real (h)"},{key:"action",label:"Accion"}],info_operator:[],itemselected:{},infoSupplier_2:{},infoProviders:{},valueSelectedSupplier:"",modify_realtime_hour_supplier:[],infoMantenimiento:this.infoDetalle,infoDuration:{plan_frecuency_id:0,code_duration:null,max_value:0},infoMeasure:[],columnsMeasure:[]},Object(s["a"])(e,"columnsMeasure",[{key:"description_duration",label:"Unidade de Medida"},{key:"max_value",label:"Valor Maximo"},{key:"edit",label:"Edit"}]),Object(s["a"])(e,"columnsActivities",[{key:"activity_action_code",label:"Actividad"},{key:"description",label:"Descripcion"},{key:"amount",label:"Cantidad de Partes"},{key:"part",label:"Parte Seleccionada"},{key:"action",label:"Acciones"}]),Object(s["a"])(e,"dataActivities",[]),Object(s["a"])(e,"columnsParts",[{key:"code",label:"Codigo"},{key:"description",label:"Descripcion"},{key:"amount_per_parent",label:"Cantidad"},{key:"price_list",label:"Precio de Lista"},{key:"percentage_use_pending",label:"% de Uso"},{key:"action",label:"Accion"}]),Object(s["a"])(e,"dataParts",[]),Object(s["a"])(e,"infoActivities",(t={plan_activities_id:0},Object(s["a"])(t,"plan_activities_id",null),Object(s["a"])(t,"is_planned",!1),Object(s["a"])(t,"description",""),t)),e},methods:Object(s["a"])({onHit:function(t){this.src.includes("partssearch")?(this.valueSelectedSupplier=t.code+" "+t.description,this.infoActivities.assets_parts_id=t.assets_parts_id,this.infoActivities.cost_part=t.price_list):(this.valueSelectedSupplier=t.name,this.infoProviders.supplier_id=t.supplier_id)},updateQuerySupplier:function(){this.query=this.valueSelectedSupplier,this.update()},resetInput:function(){this.value="",this.valueSelectedTool="",this.reset()},changePart:function(t,e,i){var n=this;t.plan_id=this.infoMantenimiento.plan_id,t.action_part=i,r["a"].plan(t,"parts",e).then((function(t){n.calcularPartes()}))},historyChangeStates:function(){var t=this;r["a"].plan(this.infoMantenimiento.plan_id,"plan","state-history").then((function(e){t.infoStatesLogs=e.data}))},getFinalResult:function(){var t=this;r["a"].plan(this.infoMantenimiento.plan_id,"plan","get-total-cost").then((function(e){t.totalCostPlan=e.data}))},liquidarOrden:function(){this.$emit("close",!1)},savePlan:function(){var t=this;this.infoMantenimiento.assets_id=this.assets_id,r["a"].plan(this.infoMantenimiento,"plan",0==this.infoMantenimiento.plan_id?"insert":"update").then((function(e){0==t.infoMantenimiento.plan_id?t.infoMantenimiento.plan_id=e.data:t.$emit("refresh",e.data)}))},addCostsInfo:function(){var t=this;null==this.infoMantenimiento.costs&&(this.infoMantenimiento.costs=[]);for(var e=!1,i=0;i<this.infoMantenimiento.costs.length;i++){var n=this.infoMantenimiento.costs[i];n.activity==this.infoProviders.activity&&(e=!0)}e||this.infoMantenimiento.costs.push({activity:this.infoProviders.activity,estimated_cost:this.infoProviders.estimated_cost,real_cost:this.infoProviders.real_cost,is_planned:"CR"==this.infoMantenimiento.state}),r["a"].plan(this.infoMantenimiento,"plan",0==this.infoMantenimiento.plan_id?"insert":"update").then((function(e){t.infoProviders={},0==t.infoMantenimiento.plan_id?t.infoMantenimiento.plan_id=e.data:t.$emit("refresh",e.data)}))},saveDuration:function(){var t=this;this.infoDuration.plan_id=this.infoMantenimiento.plan_id,r["a"].plan(this.infoDuration,"frecuency",0==this.infoDuration.plan_frecuency_id?"insert":"update").then((function(e){""!=e.data?(t.infoMeasure=e.data,t.infoDuration={plan_frecuency_id:0,code_duration:null,max_value:0}):t.infoMeasure=[]}))},loadDuration:function(){var t=this;r["a"].plan(this.infoMantenimiento.plan_id,"frecuency","select").then((function(e){""!=e.data?(t.infoMeasure=e.data,t.infoDuration={plan_frecuency_id:0,code_duration:null,max_value:0}):t.infoMeasure=[]}))},removeDuration:function(t){var e=this;r["a"].plan(t,"frecuency","delete").then((function(t){""!=t.data?(e.infoMeasure=t.data,e.infoDuration={plan_frecuency_id:0,code_duration:null,max_value:0}):e.infoMeasure=[]}))},getActivities:function(){var t=this;this.valueSelectedSupplier="",this.src=u["e"]+"partssearch/".concat(this.infoMantenimiento.assets_id,"/"),r["a"].plan(this.infoMantenimiento.plan_id,"activities","select").then((function(e){var i;""!=e.data?(t.dataActivities=e.data,t.infoActivities=(i={plan_activities_id:0},Object(s["a"])(i,"plan_activities_id",null),Object(s["a"])(i,"is_planned",!1),Object(s["a"])(i,"description",""),i)):t.dataActivities=[]}))},saveActivities:function(){var t=this;this.infoActivities.plan_id=this.infoMantenimiento.plan_id,this.infoProviders.is_planned="CR"==this.infoMantenimiento.state,r["a"].plan(this.infoActivities,"activities",0==this.infoActivities.plan_activities_id||null==this.infoActivities.plan_activities_id?"insert":"update").then((function(e){var i;200==e.status?(t.getActivities(),t.infoActivities=(i={plan_activities_id:0},Object(s["a"])(i,"plan_activities_id",null),Object(s["a"])(i,"is_planned",!1),Object(s["a"])(i,"description",""),i)):t.infoMeasure=[]}))},deleteActivities:function(t,e){var i=this;t.plan_id=this.infoMantenimiento.plan_id,r["a"].plan(t,"activities",e).then((function(t){var e;200==t.status&&(i.getActivities(),i.infoActivities=(e={plan_activities_id:0},Object(s["a"])(e,"plan_activities_id",null),Object(s["a"])(e,"is_planned",!1),Object(s["a"])(e,"description",""),e))}))},deletePersonal:function(t){var e=this;r["a"].plan(t.plan_personal_id,"personal","delete").then((function(t){e.getPersonl()}))},changeStateEditValue:function(t){this.infoPersonal.realtime_hour=t.item.realtime_hour,this.infoPersonal_2=t.item;for(var e=0;e<this.modify_realtime_hour.length;e++){var i=this.modify_realtime_hour[e],n=Object.keys(i)[0];n!="id"+t.item.plan_personal_id&&(this.modify_realtime_hour[e][n]=!1)}this.modify_realtime_hour[t.index]["id"+t.item.plan_personal_id]=!this.modify_realtime_hour[t.index]["id"+t.item.plan_personal_id]},editValuePersonal:function(){var t=this;this.infoPersonal_2.realtime_hour=this.infoPersonal.realtime_hour,this.infoPersonal_2.plan_id=this.infoMantenimiento.plan_id,r["a"].plan(this.infoPersonal_2,"personal",0==this.infoPersonal_2.plan_personal_id||null==this.infoPersonal_2.plan_personal_id?"insert":"update").then((function(e){t.getPersonl()}))},loadPersonalEdit:function(t){this.infoPersonal=t;for(var e=0;e<this.info_operator.length;e++){var i=this.info_operator[e];i.personal_id==t.personal_id&&(this.itemselected=i)}},getPersonl:function(){var t=this;r["a"].plan(this.infoMantenimiento.plan_id,"personal","select").then((function(e){if(""!=e.data){t.dataPersonal=e.data,t.modify_realtime_hour=[];for(var i=0;i<t.dataPersonal.length;i++){var n={};n["id"+t.dataPersonal[i].plan_personal_id]=!1,t.modify_realtime_hour.push(n)}}else t.dataPersonal=[]}))},savePersonl:function(){var t=this;this.infoPersonal.plan_id=this.infoMantenimiento.plan_id,this.infoPersonal.personal_id=this.itemselected.personal_id,this.infoPersonal.is_planned="CR"==this.infoMantenimiento.state,this.infoPersonal.cost_per_hour=this.itemselected.salary,this.infoPersonal.realtime_hour=0,r["a"].plan(this.infoPersonal,"personal",0==this.infoPersonal.plan_personal_id||null==this.infoPersonal.plan_personal_id?"insert":"update").then((function(e){t.getPersonl()}))},deletePersonl:function(t){var e=this;r["a"].plan(t,"personal","delete").then((function(t){e.getPersonl()}))},calcularPartes:function(){var t=this;r["a"].plan(this.infoMantenimiento.plan_id,"parts","select-all-parts").then((function(e){""!=e.data?t.dataParts=e.data:t.dataParts=[]}))},changeStateEditValueSupplir:function(t){this.infoSupplier_2=t.item,this.infoProviders.realtime_hour=t.item.realtime_hour,this.infoProviders.real_cost=null==t.item.real_cost||null==t.item.real_cost?0:t.item.real_cost;for(var e=0;e<this.modify_realtime_hour.length;e++){var i=this.modify_realtime_hour[e],n=Object.keys(i)[0];n!="id"+t.item.plan_personal_id&&(this.modify_realtime_hour[e][n]=!1)}this.modify_realtime_hour_supplier[t.index]["idx"+t.item.plan_supplier_id]=!this.modify_realtime_hour_supplier[t.index]["idx"+t.item.plan_supplier_id]},editValueSupplier:function(){var t=this;this.infoSupplier_2.real_cost=this.infoProviders.real_cost,this.infoSupplier_2.realtime_hour=this.infoProviders.realtime_hour,this.infoSupplier_2.plan_id=this.infoMantenimiento.plan_id,r["a"].plan(this.infoSupplier_2,"supplier",0==this.infoSupplier_2.plan_supplier_id||null==this.infoSupplier_2.plan_supplier_id?"insert":"update").then((function(e){t.getSupplier()}))},loadSupplierEdit:function(t){this.infoProviders=t,this.valueSelectedSupplier=t.supplier},getSupplier:function(){var t=this;this.valueSelectedSupplier="",this.src=u["f"]+"suppliersearch/",r["a"].plan(this.infoMantenimiento.plan_id,"supplier","select").then((function(e){if(""!=e.data){t.dataSupplier=e.data,t.modify_realtime_hour_supplier=[];for(var i=0;i<t.dataSupplier.length;i++){var n={};n["idx"+t.dataSupplier[i].plan_supplier_id]=!1,t.modify_realtime_hour_supplier.push(n)}}else t.dataSupplier=[]}))},saveSupplier:function(){var t=this;this.infoProviders.plan_id=this.infoMantenimiento.plan_id,this.infoProviders.is_planned="CR"==this.infoMantenimiento.state,this.infoProviders.realtime_hour=0,this.showMessage=!1,r["a"].plan(this.infoProviders,"supplier",0==this.infoProviders.plan_supplier_id||null==this.infoProviders.plan_supplier_id?"insert":"update").then((function(e){200==e.status?(t.getSupplier(),t.infoProviders={},t.valueSelectedSupplier="",t.showMessage=!0,t.messageAlert="El registro se ha guardado exitosamente",t.varianMessage="success"):(t.showMessage=!0,t.messageAlert="Error al guardar registro, valide que todo este completo",t.varianMessage="danger")}))},deleteSupplier:function(t){var e=this;r["a"].plan(t,"supplier","delete").then((function(t){e.getSupplier()}))}},"calcularPartes",(function(){var t=this;r["a"].plan(this.infoMantenimiento.plan_id,"parts","select-all-parts").then((function(e){""!=e.data?t.dataParts=e.data:t.dataParts=[]}))})),created:function(){var t=this;this.src=u["f"]+"suppliersearch/",r["a"].loadoperators("select","{}").then((function(e){t.info_operator=e.data})),null==this.infoMantenimiento.costs&&(this.infoMantenimiento.costs=[]),this.loadDuration(),this.getActivities()}},m=p,f=(i("60bc"),i("d152"),i("2877")),_=Object(f["a"])(m,n,a,!1,null,null,null);e["default"]=_.exports}}]);
//# sourceMappingURL=chunk-616c3b3f.b0cd0f03.js.map