(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-83622762"],{"9b97":function(t,e,n){"use strict";n.d(e,"a",(function(){return l}));var a=n("bc3a"),i=n.n(a),o=n("86c7"),r={headers:{Authorization:null==localStorage.getItem("syncbox.cloud")?"":JSON.parse(localStorage.getItem("syncbox.cloud")).token}},l={categories:function(t,e){return i.a.post(o["e"]+"categoriescontrol/"+e,t,r)},assets:function(t,e){return i.a.post(o["e"]+"assetscontrol/"+e,t,r)},assetsParts:function(t,e){return i.a.post(o["e"]+"assetspartscontrol/"+e,t,r)},durationProducts:function(t,e){return i.a.post(o["e"]+"durationsproducts/"+e,t,r)},plan:function(t,e,n){return i.a.post(o["e"]+"plan/"+e+"/"+n,t,r)},registroDatos:function(t,e,n,a){return i.a.post(o["e"]+"durationcontrol/"+e+"/"+n+"/"+a,t,r)},invLinea:function(){return i.a.get(o["e"]+"invlinea",r)},loadoperators:function(t,e){return i.a.post(o["e"]+"eventsoperators/"+t,e,r)},getColorState:function(t){return"CR"==t?"default":"CN"==t?"dark":"AC"==t?"info":"CE"==t?"secondary":"FI"==t?"success":"NA"==t?"danger":"EO"==t||"PV"==t?"warning":void 0},getTextState:function(t){return"CR"==t?"Creado":"CN"==t?"Cancelado":"AC"==t?"Activo":"CE"==t?"Terminado":"FI"==t?"Finalizado":"NA"==t?"No Autorizado":"EO"==t?"En Operacion":"PV"==t?"Por Verificar":void 0},getPriority:function(t){return"alta"==t?"danger":"media"==t?"warning":"baja"==t?"info":void 0}}},a46d:function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("h4",{staticClass:"font-weight-bold py-3 mb-4"},[t._v("Ordenes de Trabajo Pendientes Por Finalizar")]),t._v(" "),n("div",{staticClass:"w-100 text-right"}),t._v(" "),n("b-table",{staticClass:"mt-3",attrs:{small:"","show-empty":"",stacked:"md",fields:t.mantenimientoColumns,items:t.mantenimientoTableData},scopedSlots:t._u([{key:"cell(description)",fn:function(e){return[t._v("\n            "+t._s(e.item.description)+"      "),n("b-badge",{attrs:{variant:t.getInfoState(e.item.state,"color")}},[t._v(t._s(t.getInfoState(e.item.state,"text")))])]}},{key:"cell(priority)",fn:function(e){return[n("b-badge",{attrs:{variant:t.getInfoState(e.item.priority,"priority")}},[t._v(t._s(e.item.priority))])]}},{key:"cell(edit)",fn:function(e){return[n("div",{staticClass:"text-left"},["CE"==e.item.state?n("b-button",{attrs:{size:"xs",variant:"outline-secondary"},on:{click:function(n){n.preventDefault(),t.mantConfig=!0,t.infoDetalleMant=e.item}}},[n("i",{staticClass:"far fa-eye"}),t._v("   Cerrar OT")]):t._e()],1)]}}])}),t._v(" "),n("b-modal",{attrs:{"hide-footer":"",centered:"",title:"Confirmación de Acción"},model:{value:t.actionConfirm,callback:function(e){t.actionConfirm=e},expression:"actionConfirm"}},[n("h3",{class:"AC"==t.infoDetalleMant.new_state?"text-success text-center":"text-danger text-center"},[t._v(t._s("AC"==t.infoDetalleMant.new_state?"Liberar Orden de Trabajo":"Terminar la Solicitud"))]),t._v(" "),n("h4",{staticClass:"text-center"},[t._v("¿Desea Continuar?")]),t._v(" "),"AC"!=t.infoDetalleMant.new_state?n("b-form-group",{attrs:{"label-cols":"12",label:""}},[n("b-form-textarea",{attrs:{id:"textarea",placeholder:"Detalle...",rows:"3","max-rows":"6"},model:{value:t.infoDetalleMant.comment,callback:function(e){t.$set(t.infoDetalleMant,"comment",e)},expression:"infoDetalleMant.comment"}})],1):t._e(),t._v(" "),n("hr"),t._v(" "),n("div",{staticClass:"text-right"},[n("b-button",{attrs:{size:"md",variant:"secondary"},on:{click:function(e){t.actionConfirm=!1}}},[t._v("Cancelar")]),t._v(" "),n("b-button",{attrs:{size:"md",variant:"AC"==t.infoDetalleMant.new_state?"success":"danger",disabled:"AC"!=t.infoDetalleMant.new_state&&(""==t.infoDetalleMant.comment||null==this.infoDetalleMant.comment)},on:{click:function(e){return t.updateState()}}},[t._v("Confirmar")])],1)],1),t._v(" "),n("b-modal",{attrs:{"hide-footer":"",centered:"",title:"Confirmación de Acción"},model:{value:t.actionLQ,callback:function(e){t.actionLQ=e},expression:"actionLQ"}},[n("h3",{staticClass:"text-danger text-center"},[t._v(t._s("Desea Liquidar la OT"))]),t._v(" "),n("h4",{staticClass:"text-center"},[t._v("¿Desea Continuar?")]),t._v(" "),n("b-form-textarea",{attrs:{id:"textarea",placeholder:"Detalle...",rows:"3","max-rows":"6"},model:{value:t.infoDetalleMant.comment,callback:function(e){t.$set(t.infoDetalleMant,"comment",e)},expression:"infoDetalleMant.comment"}}),t._v(" "),n("hr"),t._v(" "),n("div",{staticClass:"text-right"},[n("b-button",{attrs:{size:"md",variant:"secondary"},on:{click:function(e){t.actionConfirm=!1}}},[t._v("Cancelar")]),t._v(" "),n("b-button",{attrs:{size:"md",variant:"danger",disabled:""==t.infoDetalleMant.comment||null==this.infoDetalleMant.comment},on:{click:function(e){return t.updateState()}}},[t._v("Confirmar")])],1)],1),t._v(" "),n("b-modal",{attrs:{"hide-footer":"",size:"xl"},scopedSlots:t._u([{key:"modal-title",fn:function(){return[t._v("\n            Gestionar OT\n        ")]},proxy:!0}]),model:{value:t.mantConfig,callback:function(e){t.mantConfig=e},expression:"mantConfig"}},[t._v(" "),n("maintenance-definition",{attrs:{assets_id:this.infoDetalleMant.assets_id,infoDetalle:t.infoDetalleMant},on:{close:function(e){t.mantConfig=e,t.infoDetalleMant.new_state=e?"":"FI",t.actionLQ=!e}}})],1)],1)},i=[],o=(n("d3b7"),n("86c7"),n("9b97")),r={components:{"maintenance-definition":function(){return Promise.all([n.e("chunk-2d0e97b4"),n.e("chunk-616c3b3f"),n.e("chunk-cddab694")]).then(n.bind(null,"f182"))}},metaInfo:{title:"OT Pendientes Por Finalizar"},data:function(){return{actionLQ:!1,actionConfirm:!1,mantConfig:!1,infoDetalleMant:{comment:null},mantenimientoTableData:[],mantenimientoColumns:[{key:"plan_id",label:"OT"},{key:"code",label:"Activo"},{key:"description",label:"Descripción"},{key:"chart_created",label:"Fecha de Creacion"},{key:"date_last_state_change",label:"Ultimo Estado"},{key:"username",label:"Usuario"},{key:"maintenance_type",label:"Tipo"},{key:"priority",label:"Prioridad"},{key:"percentage_use_pending",label:"% de Uso"},{key:"edit",label:"Cierre"}]}},methods:{getInfoState:function(t,e){return"color"==e?o["a"].getColorState(t):"text"==e?o["a"].getTextState(t):"priority"==e?o["a"].getPriority(t):void 0},accessControl:function(t,e){return"CR"==t?"edit"==e||"cancelar"==e||"iniciar"==e:"CN"!=t&&"NA"!=t&&("CN"==t?"iniciar"==e:void 0)},openActionConfirm:function(t,e){this.infoDetalleMant=t,this.infoDetalleMant.new_state=e,this.actionConfirm=!0},updateState:function(){var t=this;o["a"].plan(this.infoDetalleMant,"plan","update-state").then((function(e){t.loadInfo()}))},loadInfo:function(){var t=this;o["a"].plan(0,"plan","select-to-close").then((function(e){t.mantenimientoTableData=[],""!=e.data&&(t.mantenimientoTableData=e.data)}))}},created:function(){this.loadInfo()}},l=r,s=n("2877"),c=Object(s["a"])(l,a,i,!1,null,null,null);e["default"]=c.exports}}]);
//# sourceMappingURL=chunk-83622762.5b595d87.js.map