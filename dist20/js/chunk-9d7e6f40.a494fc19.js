(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-9d7e6f40"],{"1a82":function(t,e,s){},3790:function(t,e,s){"use strict";s.d(e,"a",(function(){return o}));var a=s("bc3a"),n=s.n(a),i=s("86c7"),r={headers:{Authorization:null==localStorage.getItem("syncbox.cloud")?"":JSON.parse(localStorage.getItem("syncbox.cloud")).token}},o={orders:function(t,e){return console.log(JSON.parse(localStorage.getItem("syncbox.cloud")).token),console.log(i["n"]),n.a.post(i["n"]+"commercialsorders/"+e,t,r)},addheadorders:function(t,e){return n.a.post(i["n"]+"comercialordercontroller/"+e,t,r)},addorderdetails:function(t,e){return n.a.post(i["n"]+"comercialorderdetailcontroller/"+e,t,r)},gettrm:function(t){return n.a.get(i["n"]+"gettrm/"+t,r)},update_order_status:function(t,e){return n.a.post(i["n"]+"updateorderstatus",t,r)},purchases:function(t,e){return n.a.post(i["n"]+"commercialpurchases/"+e,t,r)},getcartera:function(t,e){return n.a.get(i["n"]+"getoutstandinginvoices/"+e+"/"+t,r)},deliveries:function(t,e){return n.a.post(i["n"]+"deliveries/"+e,t,r)},globalordersreport:function(){return n.a.get(i["n"]+"globalordersreport",r)},quotcontroller:function(t,e){return n.a.post(i["n"]+"quotcontroller/"+e,t,r)},printOrders:function(t){var e="http://localhost:3000/orders",s="POST",a=t;return n.a.request({url:e,method:s,data:a,responseType:"blob"})},sendMail:function(t){return n.a.post("http://localhost:3000/orders",t,r)}}},"8aa4":function(t,e,s){},"8e35":function(t,e,s){"use strict";var a=s("1a82"),n=s.n(a);n.a},"9aa7":function(t,e,s){"use strict";var a=s("b03f"),n=s.n(a);n.a},b03f:function(t,e,s){},ccd7:function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("h4",{staticClass:"font-weight-bold py-3 mb-0"},[t._v(" Tambor de Pedidos ")]),t._v(" "),s("div",{staticClass:"row"},[s("div",{staticClass:"col"},[s("b-row",[s("b-col",{staticClass:"my-1",attrs:{md:"5"}},[s("b-input-group",[s("b-form-input",{attrs:{placeholder:"Buscar..."},model:{value:t.filter,callback:function(e){t.filter=e},expression:"filter"}}),t._v(" "),s("b-input-group-append",[s("b-btn",{attrs:{disabled:!t.filter},on:{click:function(e){t.filter=""}}},[s("span",{staticClass:"oi oi-delete"})])],1)],1)],1),t._v(" "),s("b-col",{staticClass:"my-1",attrs:{md:"4"}},[s("b-form-select",{attrs:{options:t.pageOptions},model:{value:t.perPage,callback:function(e){t.perPage=e},expression:"perPage"}})],1),t._v(" "),s("b-col",{staticClass:"d-flex justify-content-center my-1",attrs:{md:"3"}},[s("label",{staticClass:"switcher switcher-success mt-2"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.order_active,expression:"order_active"}],staticClass:"switcher-input",attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.order_active)?t._i(t.order_active,null)>-1:t.order_active},on:{click:function(e){return t.ejecutar_cambio()},change:function(e){var s=t.order_active,a=e.target,n=!!a.checked;if(Array.isArray(s)){var i=null,r=t._i(s,i);a.checked?r<0&&(t.order_active=s.concat([i])):r>-1&&(t.order_active=s.slice(0,r).concat(s.slice(r+1)))}else t.order_active=n}}}),t._v(" "),s("span",{staticClass:"switcher-indicator"},[s("span",{staticClass:"switcher-yes"},[s("span",{staticClass:"ion ion-md-checkmark"})]),t._v(" "),s("span",{staticClass:"switcher-no"},[s("span",{staticClass:"ion ion-md-close"})])]),t._v(" "),s("span",{staticClass:"switcher-label"},[t._v(t._s(t.order_active?"Activas":"Cerradas"))])]),t._v(" "),s("b-btn",{directives:[{name:"b-modal",rawName:"v-b-modal.modals-default",modifiers:{"modals-default":!0}}],staticClass:"btn-md",attrs:{variant:"outline-info icon-btn"},on:{click:function(e){return e.preventDefault(),t.openHelp(e)}}},[s("i",{staticClass:"fas fa-chalkboard-teacher"})])],1)],1),t._v(" "),s("b-table",{staticClass:"h-100 w-100 bg-white mt-2",staticStyle:{"font-size":"12px"},style:{"max-height":(t.windowHeight-280).toString()+"px"},attrs:{responsive:"",items:t.cptItems,fields:t.columnsCommercialsOrders,"current-page":t.currentPage,"per-page":t.perPage,"no-border-collapse":!1,"sticky-header":!0,hover:!0,striped:!0,bordered:!0},scopedSlots:t._u([{key:"head(deadline)",fn:function(e){return[s("div",{staticClass:"text-nowrap"},[t._v("Fecha Compromiso")])]}},{key:"head(order_created)",fn:function(e){return[s("div",{staticClass:"text-nowrap"},[t._v("Fecha Ingreso")])]}},{key:"head(order_code)",fn:function(e){return[s("div",{staticClass:"text-nowrap"},[t._v("# Pedido")])]}},{key:"head(product_code)",fn:function(e){return[s("div",{staticClass:"text-nowrap"},[t._v("Codigo")])]}},{key:"head(product_description)",fn:function(e){return[s("div",{staticClass:"text-nowrap"},[t._v("Descripcion")])]}},{key:"head(customer_name)",fn:function(e){return[s("div",{staticClass:"text-nowrap"},[t._v("Cliente")])]}},{key:"cell(total_pending)",fn:function(e){return[s("div",{staticClass:"text-nowrap text-right"},[t._v(" "+t._s(t.numberWithCommas(e.item.total_pending)))])]}},{key:"cell(available_inventory)",fn:function(e){return[s("div",{staticClass:"text-nowrap text-right"},[t._v(" "+t._s(t.numberWithCommas(e.item.available_inventory)))])]}},{key:"cell(delivered_quantity)",fn:function(e){return[s("div",{staticClass:"text-nowrap text-right"},[t._v(" "+t._s(t.numberWithCommas(e.item.delivered_quantity)))])]}},{key:"cell(requested_amount)",fn:function(e){return[s("div",{staticClass:"text-nowrap text-right"},[t._v(" "+t._s(t.numberWithCommas(e.item.requested_amount)))])]}},{key:"cell(order_code)",fn:function(e){return[s("div",{staticClass:"text-nowrap"},[t._v(" "+t._s(e.item.order_code))])]}},{key:"cell(product_description)",fn:function(e){return[s("div",{staticClass:"text-nowrap"},[t._v(" "+t._s(e.item.product_description))])]}},{key:"cell(customer_name)",fn:function(e){return[s("div",{staticClass:"text-nowrap"},[t._v(" "+t._s(e.item.customer_name))])]}},{key:"cell(edit)",fn:function(e){return[t.check_access("drump_commercial","w")?s("b-dropdown",{attrs:{variant:"default btn-xs icon-btn md-btn-flat hide-arrow",right:!t.isRTL}},[s("template",{slot:"button-content"},[s("i",{staticClass:"ion ion-ios-settings"})]),t._v(" "),s("b-dropdown-item",{on:{click:function(s){t.open_order_to_edit(e.item),t.showEditContentOrder=!0}}},[t._v("   Modificar Pedido")])],2):t._e()]}}])}),t._v(" "),s("div",{staticClass:"d-flex justify-content-between"},[s("div",[s("b-pagination",{staticClass:"my-0",attrs:{"total-rows":t.totalRows,"per-page":t.perPage},model:{value:t.currentPage,callback:function(e){t.currentPage=e},expression:"currentPage"}})],1),t._v(" "),s("div",{staticClass:"w-25"},[s("small",{staticClass:"text-muted"},[t._v(" Total Pedidos: "+t._s(t.totalRows)+" ")]),t._v(" "),s("div",{staticClass:"small"},[t._v("\n                                Buffer Pedidos "),s("div",{staticClass:"float-right"},[t._v(" "+t._s(t.cntBlack)+" de "+t._s(t.totalRows)+" ("+t._s(Math.round(t.cntBlack/t.totalRows*100))+"%)")])]),t._v(" "),s("div",{staticClass:"progress mb-1",staticStyle:{height:"4px"}},[s("div",{class:{"progress-bar":!0,"bg-dark":!0},style:{width:String(t.cntBlack/t.totalRows*100)+"%"}})]),t._v(" "),s("div",{staticClass:"small"},[t._v("\n                                Buffer Pedidos "),s("div",{staticClass:"float-right"},[t._v(" "+t._s(t.cntDanger)+" de "+t._s(t.totalRows)+" ("+t._s(Math.round(t.cntDanger/t.totalRows*100))+"%)")])]),t._v(" "),s("div",{staticClass:"progress mb-1",staticStyle:{height:"4px"}},[s("div",{class:{"progress-bar":!0,"bg-danger":!0},style:{width:String(t.cntDanger/t.totalRows*100)+"%"}})]),t._v(" "),s("div",{staticClass:"small"},[t._v("\n                                Buffer Pedidos "),s("div",{staticClass:"float-right"},[t._v(" "+t._s(t.cntWarning)+" de "+t._s(t.totalRows)+" ("+t._s(Math.round(t.cntWarning/t.totalRows*100))+"%)")])]),t._v(" "),s("div",{staticClass:"progress mb-1",staticStyle:{height:"4px"}},[s("div",{class:{"progress-bar":!0,"bg-warning":!0},style:{width:String(t.cntWarning/t.totalRows*100)+"%"}})]),t._v(" "),s("div",{staticClass:"small"},[t._v("\n                                Buffer Pedidos "),s("div",{staticClass:"float-right"},[t._v(" "+t._s(t.cntSuccess)+" de "+t._s(t.totalRows)+" ("+t._s(Math.round(t.cntSuccess/t.totalRows*100))+"%)")])]),t._v(" "),s("div",{staticClass:"progress mb-1",staticStyle:{height:"4px"}},[s("div",{class:{"progress-bar":!0,"bg-success":!0},style:{width:String(t.cntSuccess/t.totalRows*100)+"%"}})]),t._v(" "),s("div",{staticClass:"small"},[t._v("\n                                Buffer Pedidos "),s("div",{staticClass:"float-right"},[t._v(" "+t._s(t.cntInfo)+" de "+t._s(t.totalRows)+" ("+t._s(Math.round(t.cntInfo/t.totalRows*100))+"%)")])]),t._v(" "),s("div",{staticClass:"progress mb-1",staticStyle:{height:"4px"}},[s("div",{class:{"progress-bar":!0,"bg-info":!0},style:{width:String(t.cntInfo/t.totalRows*100)+"%"}})])])])],1),t._v(" "),s("sweet-modal",{ref:"longModal"},[s("div",{staticClass:"text-left"},[s("vue-markdown",{attrs:{source:t.contentWiki,"anchor-attributes":t.anchorAttrs}})],1)])],1),t._v(" "),s("b-modal",{staticClass:"modal-center",attrs:{id:"modals-top",size:"lg"},model:{value:t.showEditContentOrder,callback:function(e){t.showEditContentOrder=e},expression:"showEditContentOrder"}},[s("div",{attrs:{slot:"modal-title"},slot:"modal-title"},[t._v("\n                    Modificar "),s("span",{staticClass:"font-weight-light"},[t._v("Ordenes Comerciales")]),s("br")]),t._v(" "),s("h3",{staticClass:"text-danger text-center"},[t._v("ATENCIÓN")]),t._v(" "),s("div"),t._v(" "),s("div"),t._v(" "),s("h5",{staticClass:"mt-2"},[t._v("Ingrese una nueva Fecha:")]),t._v(" "),s("b-input",{attrs:{placeholder:"Prioridad"},model:{value:t.infosend.deadline,callback:function(e){t.$set(t.infosend,"deadline",e)},expression:"infosend.deadline"}}),t._v(" "),s("h5",{staticClass:"mt-2"},[t._v("Seleccione un estado:")]),t._v(" "),s("multiselect",{attrs:{options:t.tableData,label:"description",searchable:!0,"show-labels":!1,placeholder:"Codigo del Estado"},model:{value:t.itemselected,callback:function(e){t.itemselected=e},expression:"itemselected"}}),t._v(" "),s("div",{staticClass:"w-100",attrs:{slot:"modal-footer"},slot:"modal-footer"},[s("div",{staticClass:"d-flex justify-content-between"},[s("div",[s("b-btn",{on:{click:function(e){t.showEditContentOrder=!1}}},[t._v("Cerrar")])],1),t._v(" "),s("div",[s("b-btn",{attrs:{variant:"warning"},on:{click:function(e){return t.update_details_order()}}},[t._v("Guardar")])],1)])])],1)],1)},n=[],i=(s("4de4"),s("a15b"),s("d81d"),s("b0c0"),s("b680"),s("d3b7"),s("ac1f"),s("25f0"),s("5319"),s("1276"),s("ade3")),r=s("3790"),o=s("8e5f"),c=s.n(o),l=s("9ce6"),d=s.n(l),u=s("b0ae"),f=s("be23"),v=s("48fc"),_=s("4265"),h={metaInfo:{title:"Tambor de Pedidos"},components:{VueMarkdown:d.a,SweetModal:u["a"],Multiselect:c.a},watch:{filter:function(t){this.filterInfo(t)}},computed:{cptItems:function(){var t=this;return this.cntBlack=0,this.cntDanger=0,this.cntWarning=0,this.cntSuccess=0,this.cntInfo=0,this.tableCommercialsOrders.map((function(e){var s=e,a="";return s.visible_buffer>100?(a="dark",t.cntBlack=t.cntBlack+1):s.visible_buffer<=100&&s.visible_buffer>66?(a="danger",t.cntDanger=t.cntDanger+1):s.visible_buffer<=66&&s.visible_buffer>33?(a="warning",t.cntWarning=t.cntWarning+1):s.visible_buffer<=33&&s.visible_buffer>=0?(a="success",t.cntSuccess=t.cntSuccess+1):(a="info",t.cntInfo=t.cntInfo+1),s._cellVariants={visible_buffer:a},s}))}},data:function(){var t;return t={windowHeight:0,tableData:[],filter_tableData:[],itemselected:{},infosend:{},showEditContentOrder:!1,order_active:!0,name:"commercial_orders",version:"v1.0.0.0",contentWiki:"",cntBlack:0,cntDanger:0,cntWarning:0,cntSuccess:0,cntInfo:0,tableCommercialsOrders:[],columnsCommercialsOrders:[{key:"visible_buffer",sortable:!0,label:"Buffer"},{key:"code_status",label:"Estado"},{key:"order_code",label:"#Pedido"},{key:"product_code",sortable:!0,label:"Código"},{key:"product_description",sortable:!0,label:"Descripción"},{key:"customer_name",sortable:!0,label:"Cliente"},{key:"requested_amount",sortable:!0,label:"Pedida"},{key:"delivered_quantity",sortable:!0,label:"Entregada"},{key:"available_inventory",sortable:!0,label:"Inventario"},{key:"total_pending",sortable:!0,label:"Pendiente"},{key:"order_created",sortable:!0,label:"Ingreso"},{key:"deadline",sortable:!0,label:"Fecha Comprometida"},{key:"edit",label:"Action"}],currentPage:1,perPage:50,totalRows:0,pageOptions:[50,100,200],filter:null},Object(i["a"])(t,"contentWiki",""),Object(i["a"])(t,"anchorAttrs",{target:"_blank",rel:"noopener noreferrer nofollow"}),t},methods:{numberWithCommas:function(t){null==t&&(t=0),t=t.toFixed(2);var e=t.toString().split(".");return e[0]=e[0].replace(/\B(?=(\d{3})+(?!\d))/g,","),e.join(".")},isRTL:function(){return"rtl"===document.documentElement.getAttribute("dir")||"rtl"===document.body.getAttribute("dir")},onResize:function(){this.windowHeight=window.innerHeight},open_order_to_edit:function(t){this.infosend=t;for(var e=0;e<this.tableData.length;e++){var s=this.tableData[e];s.code==this.infosend.code_status&&(this.itemselected=s)}},filterInfo:function(t){null!=t&&(this.tableCommercialsOrders=this.filter_tableData.filter((function(e){if(e.order_code.toLowerCase().includes(t.toLowerCase())||e.product_code.toLowerCase().includes(t.toLowerCase())||e.customer_name.toLowerCase().includes(t.toLowerCase())||e.product_description.toLowerCase().includes(t.toLowerCase()))return e})),this.totalRows=this.tableCommercialsOrders.length,this.currentPage=1,this.onFiltered(this.tableCommercialsOrders))},update_details_order:function(){var t=this;this.infosend.status_id=this.itemselected.status_id,r["a"].update_order_status({status_id:this.itemselected.status_id,dline:this.infosend.deadline,ordid:this.infosend.orders_id,odetailid:this.infosend.orders_details_id},"order-edit").then((function(e){200==e.status&&t.loadCommercialsOrders()}))},check_access:function(t,e){return v["a"].check_access(t,e)},openHelp:function(){var t=this;Object(f["a"])(this.version,this.name).then((function(e){t.contentWiki=e.data})).catch((function(e){t.contentWiki=e.data})),this.$refs.longModal.open()},loadCommercialsOrders:function(){var t=this;r["a"].orders([],"select-active-"+this.order_active).then((function(e){""!=e.data?(t.tableCommercialsOrders=e.data,t.filter_tableData=e.data,t.totalRows=t.tableCommercialsOrders.length,t.filterInfo(t.filter),t.showEditContentOrder=!1):(t.filter_tableData=[],t.tableCommercialsOrders=[],t.totalRows=0)}))},ejecutar_cambio:function(){var t=this;r["a"].orders([],"select-active-"+!this.order_active).then((function(e){t.tableCommercialsOrders=e.data,t.filter_tableData=e.data,t.totalRows=t.tableCommercialsOrders.length}))},onFiltered:function(t){this.totalRows=t.length,this.currentPage=1,this.cntBlack=0,this.cntDanger=0,this.cntWarning=0,this.cntSuccess=0,this.cntInfo=0;for(var e=0;e<t.length;e++){var s=t[e];"dark"===s._cellVariants.visible_buffer?this.cntBlack=this.cntBlack+1:"danger"===s._cellVariants.visible_buffer?this.cntDanger=this.cntDanger+1:"warning"===s._cellVariants.visible_buffer?this.cntWarning=this.cntWarning+1:"success"===s._cellVariants.visible_buffer?this.cntSuccess=this.cntSuccess+1:this.cntInfo=this.cntInfo+1}}},created:function(){var t=this;this.loadCommercialsOrders(),_["a"].documentstatus({module:"orders"},"select").then((function(e){""!=e.data?t.tableData=e.data:t.tableData=[]}))},beforeDestroy:function(){window.removeEventListener("resize",this.onResize)},mounted:function(){var t=this;window.addEventListener("resize",(function(){t.windowHeight=window.innerHeight}))},beforeCreate:function(){}},m=h,b=(s("8e35"),s("9aa7"),s("cf32"),s("2877")),p=Object(b["a"])(m,a,n,!1,null,null,null);e["default"]=p.exports},cf32:function(t,e,s){"use strict";var a=s("8aa4"),n=s.n(a);n.a}}]);
//# sourceMappingURL=chunk-9d7e6f40.a494fc19.js.map